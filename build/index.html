<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>aji</title>
  <link rel="stylesheet" type="text/css" href="js/main.min.css">
</head>
<body>
  <div id="app">
    <div class="section" id="view">
      <canvas id="canvas" :width="canvasWidth" :height="canvasHeight"></canvas>
    </div>
    <div class="section" id="controller">
      <span class="desc">padding:</span><input type="value" v-model="controller.padding">
      <div><button @click="addBody">添加bodies</button></div>
      <div><button @click="addAccessories">添加accessories</button></div>
      <div><button @click="addLine">添加line</button></div>
      <div><button @click="output">输出图片</button></div>
    </div>
    <div class="section" id="model">
      <image-part v-for="(head, i) in heads" :name="'head'+i" :ref="'head'" :key="'head'+i"  :elements="elements.heads" @changed="updateData" @focused="updateTarget"></image-part>
      <image-part v-for="(face, i) in faces" :name="'face'+i" :ref="'face'" :key="'face'+i"  :elements="elements.faces" @changed="updateData" @focused="updateTarget"></image-part>
      <image-part v-for="(body, i) in bodies" :name="'body'+i" :ref="'body'" :key="'body'+i" :elements="elements.bodies" @changed="updateData" @focused="updateTarget"></image-part>
      <image-part v-for="(accessory, i) in accessories" :name="'accessory'" :ref="'accessory'+i" :key="'accessory'+i" :elements="elements.accessories" @changed="updateData" @focused="updateTarget"></image-part>
      <text-part v-for="(line, i) in lines" :name="'line'+i" :ref="'line'" :key="'line'+i" @changed="updateData" @focused="updateTarget"></text-part>
    </div>
    <modal v-if="controller.showOutput" @close="controller.showOutput = false">
      <h3 slot="header"></h3>
      <img slot="body" :src="controller.outputImg">
      <h3 slot="footer"></h3>
    </modal>
  </div>
  <script src='js/vue.js'></script>
  <script src='js/main.min.js'></script>
</body>
</html>