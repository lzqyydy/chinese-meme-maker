{"version":3,"file":"main.min.js","sources":["../src/scripts/constants.js","../src/scripts/model.js","../src/scripts/drawMethods.js","../src/scripts/draw.js","../src/scripts/data.js","../lib/modal.vue","../lib/folder.vue","../lib/util.js","../lib/swipe_vue.js","../lib/scroll_view.vue","../src/components/element_list.vue","../src/components/slider_input.vue","../src/components/image_part.vue","../src/components/text_input.vue","../src/components/text_part.vue","../src/components/output_part.vue","../src/scripts/components.js","../src/scripts/swipe.js","../src/scripts/mixins.js","../src/scripts/sortable.esm.js","../src/scripts/store.js","../src/scripts/browser.js","../src/scripts/main.js"],"sourcesContent":["const canvasWidth = 360;\nconst canvasHeight = 270;\n\nexport { canvasWidth, canvasHeight };\n\n\n","var ImagePart = class ImagePart{\n  constructor(data){\n    if(data!==undefined){\n      this.selection = data.selection;\n      this.params = {\n        width: data.params.width,\n        height: data.params.height,\n        x: data.params.x,\n        y: data.params.y,\n        rotation: data.params.rotation,\n        mirror: data.params.mirror\n      }\n    }\n    else{\n      this.selection = null;\n      this.params = {\n        width: 0,\n        height: 0,\n        x: 0,\n        y: 0,\n        rotation: 0,\n        mirror: false\n      }\n    }\n  }\n  set(s, w, h, x, y, r, m, k){\n    this.selection = s;\n    this.params.width = w;\n    this.params.height = h;\n    this.params.x = x;\n    this.params.y = y;\n    this.params.rotation = r;\n    this.params.mirror = m;\n  }\n}\n\nvar TextPart = class TextPart{\n  constructor(data){\n    if(data!==undefined){\n      this.context = data.context;\n      this.params = {\n        size: data.params.size,\n        x: data.params.x,\n        y: data.params.y,\n        rotation: data.params.rotation,\n        mirror: data.params.mirror\n      }\n    }\n    else{\n      this.context = '';\n      this.params = {\n        size: 16,\n        x: 0,\n        y: 0,\n        rotation: 0,\n        mirror: false\n      }\n    }\n  }\n  setParam(c, s, x, y, r, m){\n    this.context = c;\n    this.params.size = s;\n    this.params.x = x;\n    this.params.y = y;\n    this.params.rotation = r;\n    this.params.mir = mir;\n  }\n}\n\nexport { ImagePart, TextPart };","function drawImage(ctx, img, x, y, w, h, r, m){\n  ctx.save();\n  if(m){\n    ctx.scale(-1,1);\n    ctx.translate(-ctx.canvas.width/2-x, ctx.canvas.height/2+y);\n    ctx.rotate(r * Math.PI / 180);\n  }\n  else{\n    ctx.translate(ctx.canvas.width/2+x, ctx.canvas.height/2+y);\n    ctx.rotate(r * Math.PI / 180);\n  }\n  ctx.drawImage(img, -w/2, -h/2, w, h);\n  ctx.restore();\n};\n\nfunction fillText(ctx, text, x, y, s, r, m){\n  ctx.fillStyle = \"#000000\";\n  ctx.font = s+\"px Georgia\";\n  ctx.textBaseline=\"middle\"; \n  ctx.textAlign=\"center\"; \n  ctx.save();\n  if(m){\n    ctx.scale(-1,1);\n    ctx.translate(-ctx.canvas.width/2-x, ctx.canvas.height/2+y);\n    ctx.rotate(r * Math.PI / 180);\n  }\n  else{\n    ctx.translate(ctx.canvas.width/2+x, ctx.canvas.height/2+y);\n    ctx.rotate(r * Math.PI / 180);\n  }\n  ctx.fillText(text, 0, 0); \n  ctx.restore();\n};\n\nfunction drawBorder(ctx, t, r, b, l){\n  ctx.save();\n  ctx.translate(ctx.canvas.width/2, ctx.canvas.height/2);\n  ctx.strokeRect(l, t, r-l, b-t); \n  ctx.restore();\n}\n\nexport { drawImage, fillText, drawBorder }","import { drawImage, fillText, drawBorder } from './drawMethods.js';\nimport { ImagePart, TextPart } from './model.js';\n\nvar newDraw = function(drawList){\n  var canvas = document.querySelector('#canvas');\n  var ctx = canvas.getContext('2d');\n  ctx.fillStyle = \"#FFFFFF\"\n  ctx.fillRect(0,0,canvas.width,canvas.height);\n  for(var i=0;i<drawList.length;i++){\n    if(drawList[i].data&&drawList[i].data instanceof ImagePart){\n      if(drawList[i].data.selection!==null){\n        drawImage(ctx, document.querySelector('#'+drawList[i].type+drawList[i].index).querySelectorAll('.element')[drawList[i].data.selection],\n                      +drawList[i].data.params.x,\n                      +drawList[i].data.params.y,\n                      +drawList[i].data.params.width,\n                      +drawList[i].data.params.height,\n                      +drawList[i].data.params.rotation,\n                      drawList[i].data.params.mirror)\n      }\n    }\n    if(drawList[i].data&&drawList[i].data instanceof TextPart){\n      if(drawList[i].data.context!==null){\n        fillText(ctx, drawList[i].data.context,\n                  +drawList[i].data.params.x,\n                  +drawList[i].data.params.y,\n                  +drawList[i].data.params.size,\n                  +drawList[i].data.params.rotation,\n                  drawList[i].data.params.mirror); \n      }\n    }\n  }\n}\n\nvar borderValueCheck = function(rect, item, lineWidth){\n  if(item instanceof TextPart){\n    if(!rect.top||rect.top > +item.params.y-item.params.size/2){\n      rect.top = +item.params.y-item.params.size/2;\n    }\n    if(!rect.right||rect.right < +item.params.x+lineWidth/2){\n      rect.right = +item.params.x+lineWidth/2;\n    }\n    if(!rect.bottom||rect.bottom < +item.params.y+item.params.size/2){\n      rect.bottom = +item.params.y+item.params.size/2;\n    }\n    if(!rect.left||rect.left > +item.params.x-lineWidth/2){\n      rect.left = +item.params.x-lineWidth/2;\n    }\n  }\n  if(item instanceof ImagePart){\n    if(!rect.top||rect.top > +item.params.y-item.params.height/2){\n      rect.top = +item.params.y-item.params.height/2;\n    }\n    if(!rect.right||rect.right < +item.params.x+item.params.width/2){\n      rect.right = +item.params.x+item.params.width/2;\n    }\n    if(!rect.bottom||rect.bottom < +item.params.y+item.params.height/2){\n      rect.bottom = +item.params.y+item.params.height/2;\n    }\n    if(!rect.left||rect.left > +item.params.x-item.params.width/2){\n      rect.left = +item.params.x-item.params.width/2;\n    }\n  }\n}\n\nvar newBorder = function(drawList, padding, isDrawBorder){\n  var canvas = document.querySelector('#canvas');\n  var ctx = canvas.getContext('2d');\n\n  var rect = {top: null, right: null, bottom: null, left: null};\n  padding = padding || 0;\n\n  for(var i=0;i<drawList.length;i++){\n    if(drawList[i].data&&drawList[i].data instanceof ImagePart){\n      if(drawList[i].data.selection!==null){\n        borderValueCheck(rect, drawList[i].data);\n      }\n    }\n    if(drawList[i].data&&drawList[i].data instanceof TextPart){\n      if(drawList[i].data.context!==null){\n        ctx.font = drawList[i].data.params.size+\"px Georgia\";\n        borderValueCheck(rect, drawList[i].data, ctx.measureText(drawList[i].data.context).width);\n      }\n    }\n  }\n\n  if(isDrawBorder&&rect.top!==null){\n    drawBorder(ctx, rect.top-padding-1, rect.right+padding+1, rect.bottom+padding+1, rect.left-padding-1);\n  }\n  if(rect.top!==null){\n    return rect;\n  }\n  else{\n    return {top: 0, right: 0, bottom: 0, left: 0};\n  }\n}\n\nexport { newDraw, newBorder };","var el_heads=[{\n  src: 'resources/heads/0000.png',\n  width: 130,\n  height: 115,\n  x: 0,\n  y: 0,\n  rotation: 0,\n  mirror: false\n}];\nvar el_faces=[{\n  src: 'resources/faces/0000.png',\n  width: 60,\n  height: 70,\n  x: 0,\n  y: 0,\n  rotation: 0,\n  mirror: false\n},{\n  src: 'resources/faces/0001.png',\n  width: 71,\n  height: 64,\n  x: 0,\n  y: 0,\n  rotation: 0,\n  mirror: false\n},{\n  src: 'resources/faces/0002.png',\n  width: 71,\n  height: 64,\n  x: 0,\n  y: 0,\n  rotation: 0,\n  mirror: false\n}];\nvar el_bodies=[{\n  src: 'resources/bodies/0000.png',\n  width: 210,\n  height: 92,\n  x: 0,\n  y: 0,\n  rotation: 0,\n  mirror: false\n},{\n  src: 'resources/bodies/0001.png',\n  width: 64,\n  height: 122,\n  x: 0,\n  y: 0,\n  rotation: 0,\n  mirror: false\n},{\n  src: 'resources/bodies/0002.png',\n  width: 64,\n  height: 122,\n  x: 0,\n  y: 0,\n  rotation: 0,\n  mirror: false\n},{\n  src: 'resources/bodies/0003.png',\n  width: 64,\n  height: 122,\n  x: 0,\n  y: 0,\n  rotation: 0,\n  mirror: false\n},{\n  src: 'resources/bodies/0004.png',\n  width: 64,\n  height: 122,\n  x: 0,\n  y: 0,\n  rotation: 0,\n  mirror: false\n},{\n  src: 'resources/bodies/0005.png',\n  width: 64,\n  height: 122,\n  x: 0,\n  y: 0,\n  rotation: 0,\n  mirror: false\n}];\nvar el_accessories=[{\n  src: 'resources/accessories/0000.png',\n  width: 71,\n  height: 64,\n  x: 0,\n  y: 0,\n  rotation: 0,\n  mirror: false\n}];\n\nexport { el_heads, el_faces, el_bodies, el_accessories };","<template>\n<transition name=\"modal\">\n  <div class=\"modal-mask\">\n    <div class=\"modal-wrapper\">\n      <div class=\"modal-container\">\n\n        <div class=\"modal-header\">\n          <slot name=\"header\">\n            default header\n          </slot>\n        </div>\n\n        <div class=\"modal-body\">\n          <slot name=\"body\">\n            default body\n          </slot>\n        </div>\n\n        <div class=\"modal-footer\">\n          <slot name=\"footer\">\n            default footer\n          </slot>\n          <slot name=\"button\"><button class=\"modal-default-button\" @click=\"handle\" :disabled=\"disabled\">OK</button></slot>\n        </div>\n\n      </div>\n    </div>\n  </div>\n</transition>\n</template>\n\n<script>\n// copied from offital Vue examples\nexport default {\n  data(){\n    return {\n      disabled: false\n    }\n  },\n  methods: {\n    handle(){\n      this.$emit('close');\n      this.disabled = true;\n    }\n  }\n}\n</script>\n\n<style type=\"stylus\">\n.modal-mask {\n  position: fixed;\n  z-index: 9998;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, .5);\n  display: flex;\n  justify-content: space-around;\n  transition: opacity .3s ease;\n}\n.modal-wrapper {\n  display: flex;\n  align-self: center;\n}\n.modal-container {\n  padding: 20px 30px;\n  background-color: #fff;\n  border-radius: 2px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, .33);\n  transition: all .3s ease;\n  font-family: Helvetica, Arial, sans-serif;\n}\n.modal-header h3 {\n  margin-top: 0;\n  color: #42b983;\n}\n.modal-body {\n  margin: 20px 0;\n}\n.modal-body > * {\n  max-width: 100%;\n  display: block;\n  margin: 0 auto;\n}\n.modal-footer > * {\n  display: inline-block;\n}\n.modal-default-button {\n  float: right;\n}\n.modal-body label{\n  display: flex;\n  justify-content: space-between;\n}\n.modal-body input{\n  width: 60%;\n}\n\n/*\n * The following styles are auto-applied to elements with\n * transition=\"modal\" when their visibility is toggled\n * by Vue.js.\n *\n * You can easily play with the modal transition by editing\n * these styles.\n */\n.modal-enter {\n  opacity: 0;\n}\n.modal-leave-active {\n  opacity: 0;\n}\n.modal-enter .modal-container,\n.modal-leave-active .modal-container {\n  -webkit-transform: scale(1.1);\n  transform: scale(1.1);\n}\n</style>","<template>\n  <div class=\"folder\">\n    <div class=\"folder-hint\" :class=\"{'folder-collapsed': collapse}\" @mousedown=\"op\" @touchstart=\"op\">{{name}}</div>\n    <slot></slot>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      collapse: true\n    };\n  },\n  props: ['name'],\n  methods: {\n    op(){\n      this.collapse = !this.collapse\n    }\n  },\n  components: {\n  }\n}\n</script>\n\n<style scoped>\n.folder-hint{\n  width: 50%;\n  background-color: #ccc;\n  /*background: #F8BB44;*/\n}\n.folder-collapsed ~ *{\n  transition: height 0.5s ease-out;\n  height: 0;\n  overflow: hidden;\n  /*display: none;*/\n}\n</style>","// Array.apply(null, { length: 136 }).map(function(value, index){\n//   return index;\n// })\n\n\n\nfunction clip(value, min, max){\n  if(value < min){\n    return min;\n  }\n  if(value > max){\n    return max;\n  }\n  return value;\n}\n\nvar randomColor = function (){\n  var r = function () { return Math.floor(Math.random()*256) };\n  return function(){\n    return \"rgb(\" + r() + \",\" + r() + \",\" + r() + \")\";\n  }\n}();\n\nvar isOverlapCircle = function(b1, b2, offset){\n  var dist = Math.sqrt((b1.x-b2.x)*(b1.x-b2.x)+(b1.y-b2.y)*(b1.y-b2.y));\n  if(dist>(b1.size/2+b2.size/2+offset)){\n    return false;\n  }\n  else{\n    return true;\n  }\n}\n\nvar isOverlapRect = function(rect1, rect2){\n  if (rect1.x < rect2.x + rect2.width &&\n     rect1.x + rect1.width > rect2.x &&\n     rect1.y < rect2.y + rect2.height &&\n     rect1.height + rect1.y > rect2.y) {\n    return true;\n  }\n  else{\n    return false;\n  }\n}\n\n\nvar shuffle = function (array) {\n  var i = array.length, tmp, rnd;\n\n  // While there remain elements to shuffle...\n  while (0 !== i) {\n\n    // Pick a remaining element...\n    rnd = Math.floor(Math.random() * i);\n    i--;\n\n    // And swap it with the current element.\n    tmp = array[i];\n    array[i] = array[rnd];\n    array[rnd] = tmp;\n  }\n\n  return array;\n}\n\nvar findClosest = function(arr, v){\n  var r;\n  var diff = Number.MAX_SAFE_INTEGER;\n\n  for(var i=0;i<arr.length;i++){\n    if(Math.abs(arr[i]-v)<diff){\n      r = i;\n      diff = Math.abs(arr[i]-v);\n    }\n  }\n  return arr[r];\n}\n\nexport { clip, randomColor, isOverlapCircle, shuffle, findClosest };","//@touchstart=\"_handleStart\" @touchmove=\"_handleMove\" @touchend=\"_handleEnd\" @touchcancel=\"_handleEnd\" @mousedown=\"_handleStart\" @mousemove=\"_handleMove\" @mouseup=\"_handleEnd\" @mouseleave=\"_handleEnd\"\n\n//touchCallback, moveCallback, endCallback, swipeCallback, tapCallback\nexport default { \n  data(){\n    return {\n      swipeParams: {\n        _moveThreshold: 50,\n        _tapThreshold: 15,\n        _tapTime: 1000,\n        _xDown: null,\n        _yDown: null,\n        _xPrev: null,\n        _yPrev: null,\n        _xUp: null,\n        _yUp: null,\n        _xMove: null,\n        _yMove: null,\n        _xDiff: null,\n        _yDiff: null,\n        _touchTime: null,\n        _xVelocity: null,\n        _yVelocity: null,\n        _moveTime: null,\n        _moved: false\n      }\n    };\n  }, \n  methods: {\n    _swipeClear(){\n      this.swipeParams._xDown = null;\n      this.swipeParams._yDown = null;\n      this.swipeParams._xPrev = null;\n      this.swipeParams._yPrev = null;\n      this.swipeParams._xUp = null;\n      this.swipeParams._yUp = null;\n      this.swipeParams._xMove = null;\n      this.swipeParams._yMove = null;\n      this.swipeParams._xDiff = null;\n      this.swipeParams._yDiff = null;\n      this.swipeParams._touchTime = null;\n      this.swipeParams._xVelocity = 0;\n      this.swipeParams._yVelocity = 0;\n      this.swipeParams._moveTime = null;\n      this.swipeParams._moved = false;\n    },\n    _handleStart(evt) {\n      evt.preventDefault();\n      evt.stopPropagation();\n      if ( this.swipeParams._xDown || this.swipeParams._yDown ) {\n        return;\n      }\n      this.swipeParams._xDown = evt.clientX || evt.touches[0].clientX;\n      this.swipeParams._yDown = evt.clientY || evt.touches[0].clientY;\n      this.swipeParams._xPrev = this.swipeParams._xDown;\n      this.swipeParams._yPrev = this.swipeParams._yDown;\n      this.swipeParams._xVelocity = 0;\n      this.swipeParams._yVelocity = 0;\n      this.swipeParams._touchTime = Date.now();\n      this.swipeParams._moveTime = Date.now();\n      this.touchCallback&&this.touchCallback({ctrlKey: evt.ctrlKey, altKey: evt.altKey, shiftKey: evt.shiftKey, metaKey: evt.metaKey});\n    },\n    _handleMove(evt) {\n      evt.preventDefault();\n      evt.stopPropagation();\n      if ( ! this.swipeParams._xDown || ! this.swipeParams._yDown ) {\n        return;\n      }\n\n      this.swipeParams._xPrev = this.swipeParams._xUp || this.swipeParams._xPrev;\n      this.swipeParams._yPrev = this.swipeParams._yUp || this.swipeParams._yPrev;\n\n      this.swipeParams._xUp = evt.clientX || evt.touches[0].clientX;\n      this.swipeParams._yUp = evt.clientY || evt.touches[0].clientY;\n\n      this.swipeParams._xMove = this.swipeParams._xDown - this.swipeParams._xUp;\n      this.swipeParams._yMove = this.swipeParams._yDown - this.swipeParams._yUp;\n      this.swipeParams._xDiff = this.swipeParams._xUp - this.swipeParams._xPrev;\n      this.swipeParams._yDiff = this.swipeParams._yUp - this.swipeParams._yPrev;\n      this.swipeParams._xVelocity = 0.8*1000*this.swipeParams._xDiff/(1+Date.now()-this.swipeParams._moveTime)+0.2*this.swipeParams._xVelocity;\n      this.swipeParams._yVelocity = 0.8*1000*this.swipeParams._yDiff/(1+Date.now()-this.swipeParams._moveTime)+0.2*this.swipeParams._yVelocity;\n\n      if( !this.swipeParams._moved ){\n        if ( Math.abs( this.swipeParams._xMove ) > Math.abs( this.swipeParams._yMove ) ) {/*most significant*/\n          if ( this.swipeParams._xMove > this.swipeParams._moveThreshold ) {\n            /* left swipe */\n            this.swipeCallback&&this.swipeCallback(0, 'left', {ctrlKey: evt.ctrlKey, altKey: evt.altKey, shiftKey: evt.shiftKey, metaKey: evt.metaKey})\n            this.swipeParams._moved = true;\n          }\n          if ( this.swipeParams._xMove < -this.swipeParams._moveThreshold ) {\n            /* right swipe */\n            this.swipeCallback&&this.swipeCallback(1, 'right', {ctrlKey: evt.ctrlKey, altKey: evt.altKey, shiftKey: evt.shiftKey, metaKey: evt.metaKey})\n            this.swipeParams._moved = true;\n          }\n        }\n        else {\n          if ( this.swipeParams._yMove > this.swipeParams._moveThreshold ) {\n            /* up swipe */\n            this.swipeCallback&&this.swipeCallback(2, 'up', {ctrlKey: evt.ctrlKey, altKey: evt.altKey, shiftKey: evt.shiftKey, metaKey: evt.metaKey})\n            this.swipeParams._moved = true;\n          }\n          if ( this.swipeParams._yMove < -this.swipeParams._moveThreshold ) {\n            /* down swipe */\n            this.swipeCallback&&this.swipeCallback(3, 'down', {ctrlKey: evt.ctrlKey, altKey: evt.altKey, shiftKey: evt.shiftKey, metaKey: evt.metaKey})\n            this.swipeParams._moved = true;\n          }\n        }\n      }\n      this.moveCallback&&this.moveCallback(this.swipeParams._xDiff, this.swipeParams._yDiff, this.swipeParams._xVelocity, this.swipeParams._yVelocity, {ctrlKey: evt.ctrlKey, altKey: evt.altKey, shiftKey: evt.shiftKey, metaKey: evt.metaKey});\n    },\n    _handleEnd(evt){\n      evt.stopPropagation();\n      if(evt.touches&&evt.touches.length){\n        return;\n      }\n      this.endCallback&&this.endCallback(this.swipeParams._xVelocity, this.swipeParams._yVelocity, {ctrlKey: evt.ctrlKey, altKey: evt.altKey, shiftKey: evt.shiftKey, metaKey: evt.metaKey});\n      if(Date.now()-this.swipeParams._touchTime<this.swipeParams._tapTime){\n        if(!this.swipeParams._xMove||(this.swipeParams._xMove&&Math.abs(this.swipeParams._xMove-this.swipeParams._xDown)<this.swipeParams._tapThreshold&&Math.abs(this.swipeParams._yMove-this.swipeParams._yDown)<this.swipeParams._tapThreshold)){\n          this.tapCallback&&this.tapCallback({ctrlKey: evt.ctrlKey, altKey: evt.altKey, shiftKey: evt.shiftKey, metaKey: evt.metaKey});\n        }\n      }\n      this._swipeClear();\n    }\n  },\n  mounted() {\n    this.$on('mousemove',  function(){\n      console.log(1);\n    })\n  }\n}\n","<template>\n  <div class=\"scrollView\">\n    <div class=\"scrollContainer\" @touchstart=\"_handleStart\" @touchmove=\"_handleMove\" @touchend=\"_handleEnd\" @touchcancel=\"_handleEnd\" @mousedown=\"_handleStart\" @mousemove=\"_handleMove\" @mouseup=\"_handleEnd\" @mouseleave=\"_handleEnd\" :class=\"{vertical: vertical, horizontal: !vertical, smoothing: smoothing}\" :style=\"{transform: vertical?'translateY('+ -offsetY +'px)':'translateX('+ -offsetX +'px)'}\">\n      <slot></slot>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {clip, findClosest} from './util.js'\nimport swipe_vue from './swipe_vue.js';\nexport default {\n  data (){\n    return {\n      offsetX: 0,\n      offsetY: 0,\n      smoothing: false\n    }\n  },\n  mixins: [swipe_vue],\n  props: ['vertical', 'slots'],\n  methods: {\n    touchCallback: function(){\n      this.smoothing = false;\n      //root bounding client\n      var rbc = this.$el.getBoundingClientRect();\n      //container bounding client\n      var cbc = this.$el.children[0].getBoundingClientRect();\n      if(this.vertical){\n        this.offsetY = rbc.top-cbc.top;\n      }\n      else{\n        this.offsetX = rbc.left-cbc.left;\n      }\n    },\n    moveCallback: function(dx, dy){\n      var rbc = this.$el.getBoundingClientRect();\n      var cbc = this.$el.children[0].getBoundingClientRect();\n      if(this.vertical){\n        this.offsetY -= dy;\n        this.offsetY = clip(this.offsetY, 0, cbc.height-rbc.bottom+rbc.top);\n      }\n      else{\n        this.offsetX -= dx;\n        this.offsetX = clip(this.offsetX, 0, cbc.width-rbc.right+rbc.left);\n      }\n    },\n    endCallback: function(vx, vy){\n      if(vx!==0||vy!==0){\n        var rbc = this.$el.getBoundingClientRect();\n        var cbc = this.$el.children[0].getBoundingClientRect();\n        this.smoothing = true;\n        if(this.vertical){\n          this.offsetY -= vy;\n          if(this.slots){\n            this.offsetY = findClosest(this.slots, this.offsetY);\n          }\n          this.offsetY = clip(this.offsetY, 0, cbc.height-rbc.bottom+rbc.top);\n        }\n        else{\n          this.offsetX -= vx;\n          if(this.slots){\n            this.offsetX = findClosest(this.slots, this.offsetX);\n          }\n          this.offsetX = clip(this.offsetX, 0, cbc.width-rbc.right+rbc.left);\n        }\n      }\n    }\n  }\n}\n</script>\n\n<style>\n.scrollView{\n  max-width: 100vw;\n  max-height: 100vh;\n  white-space: nowrap;\n  overflow: hidden;\n  display: inline-block;\n}\n/*.scrollContainer{\n  max-width: initial;\n  max-height: initial;\n}*/\n.scrollContainer.smoothing{\n  transition: 1.2s transform ease-out;\n}\n.scrollContainer.vertical{\n  display: block;\n}\n.scrollContainer.horizontal{\n  display: inline-block;\n}\n.scrollContainer.vertical > *{\n  display: block;\n}\n.scrollContainer.horizontal > *{\n  display: inline-block;\n}\n</style>","<template>\n  <!-- <div class=\"button inline\">left</div> -->\n  <scroll-view class=\"container\" :vertical=\"false\">\n    <img class=\"element\" v-for=\"(element, i) in elements\" :class=\"{ 'elm-selected': selection==i }\" :src=\"element.src\" :data-index=\"i\" @click.stop=\"onclick\" @touchstart=\"onclick\">\n  </scroll-view>\n  <!-- <div class=\"button inline\">right</div> -->\n</template>\n\n<script>\nimport s_v from '../../lib/scroll_view.vue';\n\nexport default {\n  props: ['elements', 'selection'],\n  methods: {\n    onclick(e) {\n      var target = e.target.dataset.index;\n      this.$emit('select', {\n        target: target, \n        data: this.elements[target]\n      });\n    }\n  },\n  components: {\n    'scroll-view': s_v\n  }\n}\n// lol overflow: hidden create block context or smh so those 'inline' elms must get middle aligned\n</script>\n\n<style type=\"stylus\" scoped>\n/*.flex{\n  display: flex;\n  flex-wrap: nowrap;\n  max-width: 100%;\n}\n.inline{\n  display: inline-block;\n  vertical-align: middle;\n}\n.button{\n  flex-basis: calc(var(--element-size) / 2);\n}*/\n.container{\n  max-width: calc(var(--element-size) * 6.2);\n  white-space: nowrap;\n  overflow: hidden;\n}\n.element {\n  max-width: var(--element-size);\n  max-height: var(--element-size);\n  border: 1px black;\n  box-sizing: border-box;\n  vertical-align: middle;\n}\n.elm-selected {\n  box-shadow: 0 0 5px #666;\n}\n</style>","<template>\n  <div class=\"slider-wrapper\" @touchstart.stop=\"\" @touchmove.stop=\"\" @mousedown.stop=\"\" @mousemove.stop=\"\" @keydown.prevent=\"\">\n    <span class=\"slider-desc\">{{name}}</span><input class=\"slider-bar\" type=\"range\" :min=\"min\" :max=\"max\" :step=\"step\" :value=\"value\" @input=\"oninput\"><input class=\"slider-checker\" type=\"value\" :value=\"value\" readonly>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n    };\n  },\n  props: ['name', 'min', 'max', 'step', 'value'],\n  methods: {\n    oninput(e){\n      //important\n      this.$emit('update:value', e.target.value);\n    }\n  }\n}\n</script>\n\n<style scoped>\n.slider-wrapper{\n  display: inline-block;\n}\n.slider-desc{\n  width: 25%;\n  display: inline-block;\n  font-size: var(--desc-size);\n}\n.slider-bar{\n  width: 60%;\n  box-sizing: border-box;\n}\n.slider-checker{\n  width: 15%;\n  box-sizing: border-box;\n}\n</style>","<template>\n  <div class=\"part\" :id=\"name\" @mousedown=\"onPartSelected\" @touchstart=\"onPartSelected\" tabindex=\"0\" @keydown=\"onkeydown\">\n    <div>\n      <span class=\"desc\">{{name}}:</span>\n    </div>\n    <div>\n      <element-list :elements=\"elements\" :selection=\"data.selection\" @select=\"onselect\"></element-list>\n    </div>\n    <div>\n      <slider-input class=\"options\" name=\"width\" :min=\"0\" :max=\"canvasWidth\" :step=\"1\" :value.sync=\"data.params.width\"></slider-input>\n      <slider-input class=\"options\" name=\"height\" :min=\"0\" :max=\"canvasHeight\" :step=\"1\" :value.sync=\"data.params.height\"></slider-input>\n    </div>\n    <div>\n      <slider-input class=\"options\" name=\"x\" :min=\"-canvasWidth/2\" :max=\"canvasWidth/2\" :step=\"1\" :value.sync=\"data.params.x\"></slider-input>\n      <slider-input class=\"options\" name=\"y\" :min=\"-canvasHeight/2\" :max=\"canvasHeight/2\" :step=\"1\" :value.sync=\"data.params.y\"></slider-input>\n    </div>\n    <div>\n      <slider-input class=\"options\" name=\"rotation\" :min=\"-180\" :max=\"180\" :step=\"1\" :value.sync=\"data.params.rotation\"></slider-input>\n      <span class=\"desc\">镜像</span><input type=\"checkbox\" v-model=\"data.params.mirror\"><span class=\"desc\">保持比例</span><input type=\"checkbox\" v-model=\"keepAspect\"> \n    </div>\n  </div>\n</template>\n\n<script>\n// copied from offital Vue examples\nimport { canvasWidth, canvasHeight } from '../scripts/constants.js'\nimport { ImagePart } from '../scripts/model.js'\nimport s_i from './slider_input.vue'\nexport default {\n  props: ['name','elements'],\n  data () {\n    return {\n      data: new ImagePart(),\n      keepAspect: true,\n      canvasWidth: canvasWidth, \n      canvasHeight: canvasHeight\n    }\n  },\n  watch: {\n    'data.params.width': function(n, o){\n      if(!isNaN(n)){\n        this.$store.commit('setParam', {\n          category: this.name.slice(0,-1), \n          index: this.name.slice(-1), \n          param: 'width', \n          value: n\n        });\n        this.$emit('changed');\n      }\n      else{\n        this.data.params.width = o;\n      }\n    },\n    'data.params.height': function(n, o){\n      if(!isNaN(n)){\n        this.$store.commit('setParam', {\n          category: this.name.slice(0,-1), \n          index: this.name.slice(-1), \n          param: 'height', \n          value: n\n        });\n        this.$emit('changed');\n      }\n      else{\n        this.data.params.height = o;\n      }\n    },\n    'data.params.x': function(n, o){\n      if(!isNaN(n)){\n        this.$store.commit('setParam', {\n          category: this.name.slice(0,-1), \n          index: this.name.slice(-1), \n          param: 'x', \n          value: n\n        });\n        this.$emit('changed');\n      }\n      else{\n        this.data.params.x = o;\n      }\n    },\n    'data.params.y': function(n, o){\n      if(!isNaN(n)){\n        this.$store.commit('setParam', {\n          category: this.name.slice(0,-1), \n          index: this.name.slice(-1), \n          param: 'y', \n          value: n\n        });\n        this.$emit('changed');\n      }\n      else{\n        this.data.params.y = o;\n      }\n    },\n    'data.params.rotation': function(n, o){\n      if(!isNaN(n)){\n        this.$store.commit('setParam', {\n          category: this.name.slice(0,-1), \n          index: this.name.slice(-1), \n          param: 'rotation', \n          value: n\n        });\n        this.$emit('changed');\n      }\n      else{\n        this.data.params.rotation = o;\n      }\n    },\n    'data.params.mirror': function(n, o){\n      this.$store.commit('setParam', {\n        category: this.name.slice(0,-1), \n        index: this.name.slice(-1), \n        param: 'mirror', \n        value: n\n      });\n      this.$emit('changed');\n    }\n  },\n  methods: {\n    onkeydown: function(e){\n      if(e.metaKey||e.ctrlKey||e.shiftKey){\n        e.preventDefault();\n      }\n      if(e.key==='ArrowLeft'){\n        if(e.metaKey||e.ctrlKey){\n          if(e.shiftKey){\n            this.data.params.width -= 10;\n          }\n          else{\n            this.data.params.width--;\n          }\n          if(this.data.params.width < 0){\n            this.data.params.width = 0;\n          }\n        }\n        else if(e.altKey){\n          if(e.shiftKey){\n            this.data.params.rotation -= 10;\n          }\n          else{\n            this.data.params.rotation--;\n          }\n        }\n        else{\n          if(e.shiftKey){\n            this.data.params.x -= 10;\n          }\n          else{\n            this.data.params.x--;\n          }\n        }\n      }\n      if(e.key==='ArrowRight'){\n        if(e.metaKey||e.ctrlKey){\n          if(e.shiftKey){\n            this.data.params.width -= -10;\n          }\n          else{\n            this.data.params.width++;\n          }\n        }\n        else if(e.altKey){\n          if(e.shiftKey){\n            this.data.params.rotation -= -10;\n          }\n          else{\n            this.data.params.rotation++;\n          }\n        }\n        else{\n          if(e.shiftKey){\n            this.data.params.x -= -10;\n          }\n          else{\n            this.data.params.x++;\n          }\n        }\n      }\n      if(e.key==='ArrowUp'){\n        if(e.metaKey||e.ctrlKey){\n          if(e.shiftKey){\n            this.data.params.height -= 10;\n          }\n          else{\n            this.data.params.height--;\n          }\n          if(this.data.params.height < 0){\n            this.data.params.height = 0;\n          }\n        }\n        else if(e.altKey){\n          if(e.shiftKey){\n            this.data.params.rotation -= 10;\n          }\n          else{\n            this.data.params.rotation--;\n          }\n        }\n        else{\n          if(e.shiftKey){\n            this.data.params.y -= 10;\n          }\n          else{\n            this.data.params.y--;\n          }\n        }\n      }\n      if(e.key==='ArrowDown'){\n        if(e.metaKey||e.ctrlKey){\n          if(e.shiftKey){\n            this.data.params.height -= -10;\n          }\n          else{\n            this.data.params.height++;\n          }\n        }\n        else if(e.altKey){\n          if(e.shiftKey){\n            this.data.params.rotation -= -10;\n          }\n          else{\n            this.data.params.rotation++;\n          }\n        }\n        else{\n          if(e.shiftKey){\n            this.data.params.y += 10;\n          }\n          else{\n            this.data.params.y++;\n          }\n        }\n      }\n    },\n    ondrag: function(dx, dy, mods){\n      if(this.data.selection!==null){\n        if(mods.ctrlKey||mods.metaKey){\n          this.data.params.width -= -dx;\n          this.data.params.height -= -dy;\n        }\n        else{\n          this.data.params.x -= -dx;\n          this.data.params.y -= -dy;\n        }\n      }\n    },\n    onselect: function(e){\n      this.data.selection = e.target;\n      this.$store.commit('select', {\n        category: this.name.slice(0,-1), \n        index: this.name.slice(-1), \n        value: e.target\n      });\n      this.data.params.width = e.data.width;\n      this.$store.commit('setParam', {\n        category: this.name.slice(0,-1), \n        index: this.name.slice(-1), \n        param: 'width', \n        value: e.data.width\n      });\n      this.data.params.height = e.data.height;\n      this.$store.commit('setParam', {\n        category: this.name.slice(0,-1), \n        index: this.name.slice(-1), \n        param: 'height', \n        value: e.data.height\n      });\n      this.data.params.x = e.data.x;\n      this.$store.commit('setParam', {\n        category: this.name.slice(0,-1), \n        index: this.name.slice(-1), \n        param: 'x', \n        value: e.data.x\n      });\n      this.data.params.y = e.data.y;\n      this.$store.commit('setParam', {\n        category: this.name.slice(0,-1), \n        index: this.name.slice(-1), \n        param: 'y', \n        value: e.data.y\n      });\n      this.data.params.rotation = e.data.rotation;\n      this.$store.commit('setParam', {\n        category: this.name.slice(0,-1), \n        index: this.name.slice(-1), \n        param: 'rotation', \n        value: e.data.rotation\n      });\n      this.data.params.mirror = e.data.mirror;\n      this.$store.commit('setParam', {\n        category: this.name.slice(0,-1), \n        index: this.name.slice(-1), \n        param: 'mirror', \n        value: e.data.mirror\n      });\n      this.onPartSelected();\n    },\n    onPartSelected: function(e){\n      this.$el.focus();\n      this.$emit('focused', this.name);\n    }\n  },\n  components: {\n    'slider-input': s_i\n  },\n  mounted(){\n    this.data.selection = this.$store.state[this.name.slice(0,-1)][this.name.slice(-1)].selection;\n    this.data.params.width = this.$store.state[this.name.slice(0,-1)][this.name.slice(-1)].params.width;\n    this.data.params.height = this.$store.state[this.name.slice(0,-1)][this.name.slice(-1)].params.height;\n    this.data.params.x = this.$store.state[this.name.slice(0,-1)][this.name.slice(-1)].params.x;\n    this.data.params.y = this.$store.state[this.name.slice(0,-1)][this.name.slice(-1)].params.y;\n    this.data.params.rotation = this.$store.state[this.name.slice(0,-1)][this.name.slice(-1)].params.rotation;\n    this.data.params.mirror = this.$store.state[this.name.slice(0,-1)][this.name.slice(-1)].params.mirror;\n  }\n}\n</script>\n\n<style type=\"stylus\" scoped>\n.part{\n  max-width: 40vw;\n}\n.options{\n  width: 50%;\n}\n</style>","<template>\n  <div class=\"text-wrapper\" @touchstart.stop=\"\" @touchmove.stop=\"\" @mousedown.stop=\"\" @mousemove.stop=\"\">\n    <span class=\"text-desc\">{{name}}</span><input class=\"text-input\" type=\"text\" :min=\"min\" :max=\"max\" :step=\"step\" :value=\"value\" @input=\"oninput\">\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n    };\n  },\n  props: ['name', 'value'],\n  methods: {\n    oninput(e){\n      //important\n      this.$emit('update:value', e.target.value);\n    }\n  }\n}\n</script>\n\n<style scoped>\n.text-wrapper{\n  display: inline-block;\n}\n.text-desc{\n  width: 25%;\n  display: inline-block;\n  font-size: var(--desc-size);\n}\n.text-input{\n  width: 75%;\n  box-sizing: border-box;\n}\n</style>","<template>\n  <div class=\"part\" :id=\"name\" @mousedown=\"onPartSelected\" @touchstart=\"onPartSelected\" tabindex=\"0\" @keydown=\"onkeydown\">\n    <div>\n      <text-input class=\"options\" :name=\"name\" :value.sync=\"data.context\"></text-input>\n    </div>\n    <div>\n      <slider-input class=\"options\" name=\"size\" :min=\"0\" :max=\"canvasHeight\" :step=\"1\" :value.sync=\"data.params.size\"></slider-input>\n    <div>\n    </div>\n      <slider-input class=\"options\" name=\"x\" :min=\"-canvasWidth/2\" :max=\"canvasWidth/2\" :step=\"1\" :value.sync=\"data.params.x\"></slider-input>\n      <slider-input class=\"options\" name=\"y\" :min=\"-canvasHeight/2\" :max=\"canvasHeight/2\" :step=\"1\" :value.sync=\"data.params.y\"></slider-input>\n    </div>\n    <div>\n      <slider-input class=\"options\" name=\"rotation\" :min=\"-180\" :max=\"180\" :step=\"1\" :value.sync=\"data.params.rotation\"></slider-input>\n      <span class=\"desc\">镜像</span><input type=\"checkbox\" v-model=\"data.params.mirror\"> \n    </div>\n  </div>\n</template>\n\n<script>\n// copied from offital Vue examples\nimport { canvasWidth, canvasHeight } from '../scripts/constants.js'\nimport { TextPart } from '../scripts/model.js'\nimport t_i from './text_input.vue'\nimport s_i from './slider_input.vue'\nexport default {\n  props: ['name'],\n  data () {\n    return {\n      data: new TextPart(),\n      canvasWidth: canvasWidth, \n      canvasHeight: canvasHeight\n    }\n  },\n  watch: {\n    'data.context': function(n, o){\n      this.$store.commit('contextChange', {\n        index: this.name.slice(-1), \n        value: n\n      });\n      this.$emit('changed');\n    },\n    'data.params.size': function(n, o){\n      if(!isNaN(n)){\n        this.$store.commit('setParam', {\n          category: this.name.slice(0,-1), \n          index: this.name.slice(-1), \n          param: 'size', \n          value: n\n        });\n        this.$emit('changed');\n      }\n      else{\n        this.data.params.width = o;\n      }\n    },\n    'data.params.x': function(n, o){\n      if(!isNaN(n)){\n        this.$store.commit('setParam', {\n          category: this.name.slice(0,-1), \n          index: this.name.slice(-1), \n          param: 'x', \n          value: n\n        });\n        this.$emit('changed');\n      }\n      else{\n        this.data.params.x = o;\n      }\n    },\n    'data.params.y': function(n, o){\n      if(!isNaN(n)){\n        this.$store.commit('setParam', {\n          category: this.name.slice(0,-1), \n          index: this.name.slice(-1), \n          param: 'y', \n          value: n\n        });\n        this.$emit('changed');\n      }\n      else{\n        this.data.params.y = o;\n      }\n    },\n    'data.params.rotation': function(n, o){\n      if(!isNaN(n)){\n        this.$emit('changed');\n        this.$store.commit('setParam', {\n          category: this.name.slice(0,-1), \n          index: this.name.slice(-1), \n          param: 'rotation', \n          value: n\n        });\n      }\n      else{\n        this.data.params.rotation = o;\n      }\n    },\n    'data.params.mirror': function(n, o){\n      this.$emit('changed');\n      this.$store.commit('setParam', {\n        category: this.name.slice(0,-1), \n        index: this.name.slice(-1), \n        param: 'mirror', \n        value: n\n      });\n    }\n  },\n  methods: {\n    onkeydown: function(e){\n      if(e.metaKey||e.ctrlKey||e.shiftKey){\n        e.preventDefault();\n      }\n      if(e.key==='ArrowLeft'){\n        if(e.metaKey||e.ctrlKey){\n          if(e.shiftKey){\n            this.data.params.size -= 10;\n          }\n          else{\n            this.data.params.size--;\n          }\n          if(this.data.params.size < 0){\n            this.data.params.size = 0;\n          }\n        }\n        else{\n          if(e.shiftKey){\n            this.data.params.x -= 10;\n          }\n          else{\n            this.data.params.x--;\n          }\n        }\n      }\n      if(e.key==='ArrowRight'){\n        if(e.metaKey||e.ctrlKey){\n          if(e.shiftKey){\n            this.data.params.size += 10;\n          }\n          else{\n            this.data.params.size++;\n          }\n        }\n        else{\n          if(e.shiftKey){\n            this.data.params.x += 10;\n          }\n          else{\n            this.data.params.x++;\n          }\n        }\n      }\n      if(e.key==='ArrowUp'){\n        if(e.metaKey||e.ctrlKey){\n          if(e.shiftKey){\n            this.data.params.size -= 10;\n          }\n          else{\n            this.data.params.size--;\n          }\n          if(this.data.params.size < 0){\n            this.data.params.size = 0;\n          }\n        }\n        else{\n          if(e.shiftKey){\n            this.data.params.y -= 10;\n          }\n          else{\n            this.data.params.y--;\n          }\n        }\n      }\n      if(e.key==='ArrowDown'){\n        if(e.metaKey||e.ctrlKey){\n          if(e.shiftKey){\n            this.data.params.size += 10;\n          }\n          else{\n            this.data.params.size++;\n          }\n        }\n        else{\n          if(e.shiftKey){\n            this.data.params.y += 10;\n          }\n          else{\n            this.data.params.y++;\n          }\n        }\n      }\n    },\n    ondrag: function(dx, dy, mods){\n      if(this.data.context!==null){\n        if(mods.ctrlKey||mods.metaKey){\n          this.data.params.size -= -dx;\n          this.data.params.size -= -dy;\n        }\n        else{\n          this.data.params.x -= -dx;\n          this.data.params.y -= -dy;\n        }\n      }\n    },\n    onPartSelected: function(e){\n      this.$el.focus();\n      this.$emit('focused', this.name);\n    }\n  },\n  components: {\n    'slider-input': s_i,\n    'text-input': t_i\n  },\n  mounted(){\n    this.data.context = this.$store.state[this.name.slice(0,-1)][this.name.slice(-1)].context;\n    this.data.params.size = this.$store.state[this.name.slice(0,-1)][this.name.slice(-1)].params.size;\n    this.data.params.x = this.$store.state[this.name.slice(0,-1)][this.name.slice(-1)].params.x;\n    this.data.params.y = this.$store.state[this.name.slice(0,-1)][this.name.slice(-1)].params.y;\n    this.data.params.rotation = this.$store.state[this.name.slice(0,-1)][this.name.slice(-1)].params.rotation;\n    this.data.params.mirror = this.$store.state[this.name.slice(0,-1)][this.name.slice(-1)].params.mirror;\n  }\n}\n</script>\n\n<style type=\"stylus\" scoped>\n.part{\n  max-width: 40vw;\n}\n.options{\n  width: 50%;\n}\n</style>","<template>\n  <div class=\"outputContainer\">\n    <img class=\"output\" :src=\"rendered\">\n    <slider-input class=\"options\" name=\"padding\" :min=\"0\" :max=\"50\" :step=\"1\" :value.sync=\"padding\"></slider-input>\n    <slider-input class=\"options\" name=\"scale\" :min=\"0\" :max=\"2\" :step=\"0.01\" :value.sync=\"scale\"></slider-input>\n    <slider-input class=\"options\" name=\"quality\" :min=\"0\" :max=\"100\" :step=\"1\" :value.sync=\"quality\"></slider-input>\n    <slider-input class=\"options\" name=\"iteration\" :min=\"0\" :max=\"64\" :step=\"1\" :value.sync=\"iteration\"></slider-input>\n    <canvas id=\"invisible\" style=\"display: none\"></canvas>\n  </div>\n</template>\n\n<script>\nimport { canvasWidth, canvasHeight } from '../scripts/constants.js'\nimport s_i from './slider_input.vue';\nexport default {\n  data(){\n    return{\n      rendered: '',\n      currentIteration: 0,\n      finished: true\n    }\n  },\n  methods: {\n    clamp: function(x){\n      if(x<0){\n        return 0;\n      }\n      if(x>255){\n        return 255;\n      }\n      return x;\n    },\n    clampuv: function(x){\n      if(x<-128){\n        return -128;\n      }\n      if(x>127){\n        return 127;\n      }\n      return x;\n    },\n    iter: function(canvas){\n      return new Promise(resolve =>{\n        var img = new Image();\n        img.onload = function(){\n          canvas.getContext('2d').drawImage(this, 0, 0, canvas.width, canvas.height);\n          resolve();\n        }\n        var imageData = canvas.getContext('2d').getImageData(0, 0, canvas.width, canvas.height);\n        var data = imageData.data;\n        for(let p = 0; p < data.length/4; ++p) {\n            const r = data[p*4  ];\n            const g = data[p*4+1];\n            const b = data[p*4+2];\n            const y = this.clamp  ((  77*r + 150*g +  29*b) >> 8);\n            const u = this.clampuv(((-43*r -  85*g + 128*b) >> 8) - 1);\n            const v = this.clampuv(((128*r - 107*g -  21*b) >> 8) - 1);\n            const r1 = this.clamp((65536*y           + 91881*v) >> 16);\n            const g1 = this.clamp((65536*y - 22553*u - 46802*v) >> 16);\n            const b1 = this.clamp((65536*y + 116130*u         ) >> 16);\n            data[p*4  ] = r1;\n            data[p*4+1] = g1;\n            data[p*4+2] = b1;\n        }\n        canvas.getContext('2d').putImageData(imageData, 0, 0);\n        img.src = canvas.toDataURL(\"image/jpeg\", this.$store.state.output.quality/100);\n          \n      });\n    },\n    output: async function(){\n      if(this.currentIteration < this.$store.state.output.iteration){\n        this.currentIteration++;\n\n        var inv = this.$el.querySelector('#invisible');\n        \n        await this.iter(inv);\n\n        this.rendered = inv.toDataURL();\n\n        requestAnimationFrame(this.output);\n      }\n      else{\n        this.finished = true;\n      }\n    },\n    reset: function(){\n      var canvas = document.querySelector('#canvas');\n      var inv = this.$el.querySelector('#invisible');\n\n      inv.width = this.$store.state.output.scale*(this.$store.state.output.region.right-this.$store.state.output.region.left)+this.$store.state.output.padding*2;\n      inv.height = this.$store.state.output.scale*(this.$store.state.output.region.bottom-this.$store.state.output.region.top)+this.$store.state.output.padding*2;\n      inv.getContext('2d').drawImage(canvas, canvas.width/2+this.$store.state.output.region.left-this.$store.state.output.padding, canvas.height/2+this.$store.state.output.region.top-this.$store.state.output.padding, this.$store.state.output.region.right-this.$store.state.output.region.left+this.$store.state.output.padding*2, this.$store.state.output.region.bottom-this.$store.state.output.region.top+this.$store.state.output.padding*2, 0, 0, inv.width, inv.height);\n\n      this.currentIteration = 0;\n      if(this.finished){\n        this.finished = false;\n        this.output();\n      }\n    }\n  },\n  computed: {\n    padding: {\n      get () {\n        return this.$store.state.output.padding;\n      },\n      set (value) {\n        this.$store.commit('updatePadding', +value);\n        this.reset();\n      }\n    },\n    scale: {\n      get () {\n        return this.$store.state.output.scale;\n      },\n      set (value) {\n        this.$store.commit('updateScale', +value);\n        this.reset();\n      }\n    },\n    quality: {\n      get () {\n        return this.$store.state.output.quality;\n      },\n      set (value) {\n        this.$store.commit('updateQuality', +value);\n        this.reset();\n      }\n    },\n    iteration: {\n      get () {\n        return this.$store.state.output.iteration;\n      },\n      set (value) {\n        this.$store.commit('updateIteration', +value);\n        this.reset();\n      }\n    }\n  },\n  components: {\n    'slider-input': s_i\n  },\n  mounted(){\n    this.reset();\n  }\n}\n</script>\n\n<style scoped>\n.outputContainer{\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n</style>","import m from '../../lib/modal.vue';\n\nimport f from '../../lib/folder.vue';\n\nimport s_v from '../../lib/scroll_view.vue'\n\nimport e_l from '../components/element_list.vue'\n\nimport i_p from '../components/image_part.vue'\n\nimport t_p from '../components/text_part.vue'\n\nimport o_p from '../components/output_part.vue'\n\nVue.component('modal', m);\n\nVue.component('folder', f);\n\nVue.component('scroll-view', s_v);\n\nVue.component('element-list', e_l);\n\nVue.component('image-part', i_p);\n\nVue.component('text-part', t_p);\n\nVue.component('output-part', o_p);\n","function _init(target, touchCallback, moveCallback, endCallback, swipeCallback, tapCallback, _moveThreshold){\n  target.addEventListener('touchstart', handleTouchStart, {passive: false});\n  target.addEventListener('touchmove', handleTouchMove, {passive: false});\n  target.addEventListener('touchend', handleTouchEnd, {passive: false});\n  target.addEventListener('touchcancel', handleTouchEnd, {passive: false});\n  target.addEventListener('mousedown', handleTouchStart, {passive: false});\n  target.addEventListener('mousemove', handleTouchMove, {passive: false});\n  target.addEventListener('mouseup', handleTouchEnd, {passive: false});\n  target.addEventListener('mouseleave', handleTouchEnd, {passive: false});\n  target.addEventListener('wheel', handleWheel, {passive: false});\n\n  var moveThreshold = _moveThreshold*target.getBoundingClientRect().width || 0.2*target.getBoundingClientRect().width;\n  var tapThreshold = 15;\n  var tapTime = 1000;\n  var xDown = null;\n  var yDown = null;\n  var xPrev = null;\n  var yPrev = null;\n  var xUp = null;\n  var yUp = null;\n  var xMove = null;\n  var yMove = null;\n  var xDiff = null;\n  var yDiff = null;\n  var touchTime = null;\n  var xVelocity = null;\n  var yVelocity = null;\n  var moveTime = null;\n\n  function clear(){\n    xDown = null;\n    yDown = null;\n    xPrev = null;\n    yPrev = null;\n    xUp = null;\n    yUp = null;\n    xMove = null;\n    yMove = null;\n    xDiff = null;\n    yDiff = null;\n    touchTime = null;\n    xVelocity = 0;\n    yVelocity = 0;\n    moveTime = null;\n  }\n\n  function handleTouchStart(evt) {\n    evt.preventDefault();\n    evt.stopPropagation();\n    if ( xDown || yDown ) {\n      return;\n    }\n    xDown = evt.clientX || evt.touches[0].clientX;\n    yDown = evt.clientY || evt.touches[0].clientY;\n    xPrev = xDown;\n    yPrev = yDown;\n    xVelocity = 0;\n    yVelocity = 0;\n    touchTime = Date.now();\n    moveTime = Date.now();\n    touchCallback&&touchCallback({ctrlKey: evt.ctrlKey, altKey: evt.altKey, shiftKey: evt.shiftKey, metaKey: evt.metaKey});\n  };\n\n  function handleTouchMove(evt) {\n    evt.preventDefault();\n    evt.stopPropagation();\n    if ( ! xDown || ! yDown ) {\n      return;\n    }\n\n    xPrev = xUp || xPrev;\n    yPrev = yUp || yPrev;\n\n    xUp = evt.clientX || evt.touches[0].clientX;\n    yUp = evt.clientY || evt.touches[0].clientY;\n\n    xMove = xDown - xUp;\n    yMove = yDown - yUp;\n    xDiff = xUp - xPrev;\n    yDiff = yUp - yPrev;\n    xVelocity = 0.8*1000*xDiff/(1+Date.now()-moveTime)+0.2*xVelocity;\n    yVelocity = 0.8*1000*yDiff/(1+Date.now()-moveTime)+0.2*yVelocity;\n\n    if ( Math.abs( xMove ) > Math.abs( yMove ) ) {/*most significant*/\n      if ( xMove > moveThreshold ) {\n        /* left swipe */\n        swipeCallback&&swipeCallback(0, 'left', {ctrlKey: evt.ctrlKey, altKey: evt.altKey, shiftKey: evt.shiftKey, metaKey: evt.metaKey})\n        clear();\n      }\n      if ( xMove < -moveThreshold ) {\n        /* right swipe */\n        swipeCallback&&swipeCallback(1, 'right', {ctrlKey: evt.ctrlKey, altKey: evt.altKey, shiftKey: evt.shiftKey, metaKey: evt.metaKey})\n        clear();\n      }\n    }\n    else {\n      if ( yMove > moveThreshold ) {\n        /* up swipe */\n        swipeCallback&&swipeCallback(2, 'up', {ctrlKey: evt.ctrlKey, altKey: evt.altKey, shiftKey: evt.shiftKey, metaKey: evt.metaKey})\n        clear();\n      }\n      if ( yMove < -moveThreshold ) {\n        /* down swipe */\n        swipeCallback&&swipeCallback(3, 'down', {ctrlKey: evt.ctrlKey, altKey: evt.altKey, shiftKey: evt.shiftKey, metaKey: evt.metaKey})\n        clear();\n      }\n    }\n    moveCallback&&moveCallback(xDiff, yDiff, xVelocity, yVelocity, {ctrlKey: evt.ctrlKey, altKey: evt.altKey, shiftKey: evt.shiftKey, metaKey: evt.metaKey});\n  }\n\n  function handleTouchEnd(evt){\n    evt.stopPropagation();\n    if(evt.touches&&evt.touches.length){\n      return;\n    }\n    endCallback&&endCallback(xVelocity, yVelocity, {ctrlKey: evt.ctrlKey, altKey: evt.altKey, shiftKey: evt.shiftKey, metaKey: evt.metaKey});\n    if(Date.now()-touchTime<tapTime){\n      if(!xMove||(xMove&&Math.abs(xMove-xDown)<tapThreshold&&Math.abs(yMove-yDown)<tapThreshold)){\n        tapCallback&&tapCallback({ctrlKey: evt.ctrlKey, altKey: evt.altKey, shiftKey: evt.shiftKey, metaKey: evt.metaKey});\n      }\n    }\n    clear();\n  }\n  function handleWheel(evt){\n    // use evt.wheelDeltaY to handle wheel\n    // on this computer unit is 120\n    // wheel += evt.wheelDeltaY;\n    // console.log('wheel', wheel);\n  }\n}\nvar swipe = {\n  init: _init\n};\nvar swipe_vue_mixin = {\n  methods: {\n    swipe_init: _init\n  }\n}\nexport { swipe as default, swipe_vue_mixin }","import swipe from './swipe.js'\n\nvar swipeMixin = {\n\tmethods: {\n    swipeHandler: function(op, text){\n      // console.log('op', op, 'text', text);\n    },\n    moveHandler: function(dx, dy, vx, vy, mods){\n      if(window.innerWidth>800){\n        this.activePart&&this.$refs[this.activePart.slice(0,-1)][this.activePart.slice(-1)].ondrag(dx, dy, mods);\n      }\n      else{\n        if(this.activePart){\n          if(this.activePart.startsWith('line')){\n            this.$refs['mText'].ondrag(dx, dy, mods);\n          }\n          else{\n            this.$refs['mImage'].ondrag(dx, dy, mods);\n          }\n        }\n      }\n    },\n    touchHandler: function(){\n      // console.log('touched');\n    },\n    endHandler: function(){\n      // console.log('ended');\n    },\n    tapHandler: function(){\n      // console.log('tapped');\n    }\n  },\n  mounted: function(){\n    swipe.init(document.querySelector('#canvas'), this.touchHandler, this.moveHandler, this.endHandler, this.swipeHandler, this.tapHandler, 10);\n  }\n}\n\nexport { swipeMixin };","/**!\n* Sortable\n* @author  RubaXa   <trash@rubaxa.org>\n* @license MIT\n*/\n\n/**!\n* Sortable.esm\n* @editor  lzqyydy\n*/\n\nif (typeof window == \"undefined\" || !window.document) {\n  throw new Error(\"Sortable.js requires a window with a document\");\n}\n\nvar dragEl,\n  parentEl,\n  ghostEl,\n  cloneEl,\n  rootEl,\n  nextEl,\n  lastDownEl,\n\n  scrollEl,\n  scrollParentEl,\n  scrollCustomFn,\n\n  lastEl,\n  lastCSS,\n  lastParentCSS,\n\n  oldIndex,\n  newIndex,\n\n  activeGroup,\n  putSortable,\n\n  autoScroll = {},\n\n  tapEvt,\n  touchEvt,\n\n  moved,\n\n  /** @const */\n  R_SPACE = /\\s+/g,\n  R_FLOAT = /left|right|inline/,\n\n  expando = 'Sortable' + (new Date).getTime(),\n\n  win = window,\n  document = win.document,\n  parseInt = win.parseInt,\n\n  $ = win.jQuery || win.Zepto,\n  Polymer = win.Polymer,\n\n  captureMode = false,\n\n  supportDraggable = !!('draggable' in document.createElement('div')),\n  supportCssPointerEvents = (function (el) {\n    // false when IE11\n    if (!!navigator.userAgent.match(/Trident.*rv[ :]?11\\./)) {\n      return false;\n    }\n    el = document.createElement('x');\n    el.style.cssText = 'pointer-events:auto';\n    return el.style.pointerEvents === 'auto';\n  })(),\n\n  _silent = false,\n\n  abs = Math.abs,\n  min = Math.min,\n\n  savedInputChecked = [],\n  touchDragOverListeners = [],\n\n  _autoScroll = _throttle(function (/**Event*/evt, /**Object*/options, /**HTMLElement*/rootEl) {\n    // Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=505521\n    if (rootEl && options.scroll) {\n      var _this = rootEl[expando],\n        el,\n        rect,\n        sens = options.scrollSensitivity,\n        speed = options.scrollSpeed,\n\n        x = evt.clientX,\n        y = evt.clientY,\n\n        winWidth = window.innerWidth,\n        winHeight = window.innerHeight,\n\n        vx,\n        vy,\n\n        scrollOffsetX,\n        scrollOffsetY\n      ;\n\n      // Delect scrollEl\n      if (scrollParentEl !== rootEl) {\n        scrollEl = options.scroll;\n        scrollParentEl = rootEl;\n        scrollCustomFn = options.scrollFn;\n\n        if (scrollEl === true) {\n          scrollEl = rootEl;\n\n          do {\n            if ((scrollEl.offsetWidth < scrollEl.scrollWidth) ||\n              (scrollEl.offsetHeight < scrollEl.scrollHeight)\n            ) {\n              break;\n            }\n            /* jshint boss:true */\n          } while (scrollEl = scrollEl.parentNode);\n        }\n      }\n\n      if (scrollEl) {\n        el = scrollEl;\n        rect = scrollEl.getBoundingClientRect();\n        vx = (abs(rect.right - x) <= sens) - (abs(rect.left - x) <= sens);\n        vy = (abs(rect.bottom - y) <= sens) - (abs(rect.top - y) <= sens);\n      }\n\n\n      if (!(vx || vy)) {\n        vx = (winWidth - x <= sens) - (x <= sens);\n        vy = (winHeight - y <= sens) - (y <= sens);\n\n        /* jshint expr:true */\n        (vx || vy) && (el = win);\n      }\n\n\n      if (autoScroll.vx !== vx || autoScroll.vy !== vy || autoScroll.el !== el) {\n        autoScroll.el = el;\n        autoScroll.vx = vx;\n        autoScroll.vy = vy;\n\n        clearInterval(autoScroll.pid);\n\n        if (el) {\n          autoScroll.pid = setInterval(function () {\n            scrollOffsetY = vy ? vy * speed : 0;\n            scrollOffsetX = vx ? vx * speed : 0;\n\n            if ('function' === typeof(scrollCustomFn)) {\n              return scrollCustomFn.call(_this, scrollOffsetX, scrollOffsetY, evt);\n            }\n\n            if (el === win) {\n              win.scrollTo(win.pageXOffset + scrollOffsetX, win.pageYOffset + scrollOffsetY);\n            } else {\n              el.scrollTop += scrollOffsetY;\n              el.scrollLeft += scrollOffsetX;\n            }\n          }, 24);\n        }\n      }\n    }\n  }, 30),\n\n  _prepareGroup = function (options) {\n    function toFn(value, pull) {\n      if (value === void 0 || value === true) {\n        value = group.name;\n      }\n\n      if (typeof value === 'function') {\n        return value;\n      } else {\n        return function (to, from) {\n          var fromGroup = from.options.group.name;\n\n          return pull\n            ? value\n            : value && (value.join\n              ? value.indexOf(fromGroup) > -1\n              : (fromGroup == value)\n            );\n        };\n      }\n    }\n\n    var group = {};\n    var originalGroup = options.group;\n\n    if (!originalGroup || typeof originalGroup != 'object') {\n      originalGroup = {name: originalGroup};\n    }\n\n    group.name = originalGroup.name;\n    group.checkPull = toFn(originalGroup.pull, true);\n    group.checkPut = toFn(originalGroup.put);\n    group.revertClone = originalGroup.revertClone;\n\n    options.group = group;\n  }\n;\n\n\n/**\n * @class  Sortable\n * @param  {HTMLElement}  el\n * @param  {Object}       [options]\n */\nfunction Sortable(el, options) {\n  if (!(el && el.nodeType && el.nodeType === 1)) {\n    throw 'Sortable: `el` must be HTMLElement, and not ' + {}.toString.call(el);\n  }\n\n  this.el = el; // root element\n  this.options = options = _extend({}, options);\n\n\n  // Export instance\n  el[expando] = this;\n\n  // Default options\n  var defaults = {\n    group: Math.random(),\n    sort: true,\n    disabled: false,\n    store: null,\n    handle: null,\n    scroll: true,\n    scrollSensitivity: 30,\n    scrollSpeed: 10,\n    draggable: /[uo]l/i.test(el.nodeName) ? 'li' : '>*',\n    ghostClass: 'sortable-ghost',\n    chosenClass: 'sortable-chosen',\n    dragClass: 'sortable-drag',\n    ignore: 'a, img',\n    filter: null,\n    preventOnFilter: true,\n    animation: 0,\n    setData: function (dataTransfer, dragEl) {\n      dataTransfer.setData('Text', dragEl.textContent);\n    },\n    dropBubble: false,\n    dragoverBubble: false,\n    dataIdAttr: 'data-id',\n    delay: 0,\n    forceFallback: false,\n    fallbackClass: 'sortable-fallback',\n    fallbackOnBody: false,\n    fallbackTolerance: 0,\n    fallbackOffset: {x: 0, y: 0}\n  };\n\n\n  // Set default options\n  for (var name in defaults) {\n    !(name in options) && (options[name] = defaults[name]);\n  }\n\n  _prepareGroup(options);\n\n  // Bind all private methods\n  for (var fn in this) {\n    if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n      this[fn] = this[fn].bind(this);\n    }\n  }\n\n  // Setup drag mode\n  this.nativeDraggable = options.forceFallback ? false : supportDraggable;\n\n  // Bind events\n  _on(el, 'mousedown', this._onTapStart);\n  _on(el, 'touchstart', this._onTapStart);\n  _on(el, 'pointerdown', this._onTapStart);\n\n  if (this.nativeDraggable) {\n    _on(el, 'dragover', this);\n    _on(el, 'dragenter', this);\n  }\n\n  touchDragOverListeners.push(this._onDragOver);\n\n  // Restore sorting\n  options.store && this.sort(options.store.get(this));\n}\n\n\nSortable.prototype = /** @lends Sortable.prototype */ {\n  constructor: Sortable,\n\n  _onTapStart: function (/** Event|TouchEvent */evt) {\n    var _this = this,\n      el = this.el,\n      options = this.options,\n      preventOnFilter = options.preventOnFilter,\n      type = evt.type,\n      touch = evt.touches && evt.touches[0],\n      target = (touch || evt).target,\n      originalTarget = evt.target.shadowRoot && evt.path[0] || target,\n      filter = options.filter,\n      startIndex;\n\n    _saveInputCheckedState(el);\n\n\n    // Don't trigger start event when an element is been dragged, otherwise the evt.oldindex always wrong when set option.group.\n    if (dragEl) {\n      return;\n    }\n\n    if (type === 'mousedown' && evt.button !== 0 || options.disabled) {\n      return; // only left button or enabled\n    }\n\n\n    target = _closest(target, options.draggable, el);\n\n    if (!target) {\n      return;\n    }\n\n    if (lastDownEl === target) {\n      // Ignoring duplicate `down`\n      return;\n    }\n\n    // Get the index of the dragged element within its parent\n    startIndex = _index(target, options.draggable);\n\n    // Check filter\n    if (typeof filter === 'function') {\n      if (filter.call(this, evt, target, this)) {\n        _dispatchEvent(_this, originalTarget, 'filter', target, el, startIndex);\n        preventOnFilter && evt.preventDefault();\n        return; // cancel dnd\n      }\n    }\n    else if (filter) {\n      filter = filter.split(',').some(function (criteria) {\n        criteria = _closest(originalTarget, criteria.trim(), el);\n\n        if (criteria) {\n          _dispatchEvent(_this, criteria, 'filter', target, el, startIndex);\n          return true;\n        }\n      });\n\n      if (filter) {\n        preventOnFilter && evt.preventDefault();\n        return; // cancel dnd\n      }\n    }\n\n    if (options.handle && !_closest(originalTarget, options.handle, el)) {\n      return;\n    }\n\n    // Prepare `dragstart`\n    this._prepareDragStart(evt, touch, target, startIndex);\n  },\n\n  _prepareDragStart: function (/** Event */evt, /** Touch */touch, /** HTMLElement */target, /** Number */startIndex) {\n    var _this = this,\n      el = _this.el,\n      options = _this.options,\n      ownerDocument = el.ownerDocument,\n      dragStartFn;\n\n    if (target && !dragEl && (target.parentNode === el)) {\n      tapEvt = evt;\n\n      rootEl = el;\n      dragEl = target;\n      parentEl = dragEl.parentNode;\n      nextEl = dragEl.nextSibling;\n      lastDownEl = target;\n      activeGroup = options.group;\n      oldIndex = startIndex;\n\n      this._lastX = (touch || evt).clientX;\n      this._lastY = (touch || evt).clientY;\n\n      dragEl.style['will-change'] = 'transform';\n\n      dragStartFn = function () {\n        // Delayed drag has been triggered\n        // we can re-enable the events: touchmove/mousemove\n        _this._disableDelayedDrag();\n\n        // Make the element draggable\n        dragEl.draggable = _this.nativeDraggable;\n\n        // Chosen item\n        _toggleClass(dragEl, options.chosenClass, true);\n\n        // Bind the events: dragstart/dragend\n        _this._triggerDragStart(evt, touch);\n\n        // Drag start event\n        _dispatchEvent(_this, rootEl, 'choose', dragEl, rootEl, oldIndex);\n      };\n\n      // Disable \"draggable\"\n      options.ignore.split(',').forEach(function (criteria) {\n        _find(dragEl, criteria.trim(), _disableDraggable);\n      });\n\n      _on(ownerDocument, 'mouseup', _this._onDrop);\n      _on(ownerDocument, 'touchend', _this._onDrop);\n      _on(ownerDocument, 'touchcancel', _this._onDrop);\n      _on(ownerDocument, 'pointercancel', _this._onDrop);\n      _on(ownerDocument, 'selectstart', _this);\n\n      if (options.delay) {\n        // If the user moves the pointer or let go the click or touch\n        // before the delay has been reached:\n        // disable the delayed drag\n        _on(ownerDocument, 'mouseup', _this._disableDelayedDrag);\n        _on(ownerDocument, 'touchend', _this._disableDelayedDrag);\n        _on(ownerDocument, 'touchcancel', _this._disableDelayedDrag);\n        _on(ownerDocument, 'mousemove', _this._disableDelayedDrag);\n        _on(ownerDocument, 'touchmove', _this._disableDelayedDrag);\n        _on(ownerDocument, 'pointermove', _this._disableDelayedDrag);\n\n        _this._dragStartTimer = setTimeout(dragStartFn, options.delay);\n      } else {\n        dragStartFn();\n      }\n\n\n    }\n  },\n\n  _disableDelayedDrag: function () {\n    var ownerDocument = this.el.ownerDocument;\n\n    clearTimeout(this._dragStartTimer);\n    _off(ownerDocument, 'mouseup', this._disableDelayedDrag);\n    _off(ownerDocument, 'touchend', this._disableDelayedDrag);\n    _off(ownerDocument, 'touchcancel', this._disableDelayedDrag);\n    _off(ownerDocument, 'mousemove', this._disableDelayedDrag);\n    _off(ownerDocument, 'touchmove', this._disableDelayedDrag);\n    _off(ownerDocument, 'pointermove', this._disableDelayedDrag);\n  },\n\n  _triggerDragStart: function (/** Event */evt, /** Touch */touch) {\n    touch = touch || (evt.pointerType == 'touch' ? evt : null);\n\n    if (touch) {\n      // Touch device support\n      tapEvt = {\n        target: dragEl,\n        clientX: touch.clientX,\n        clientY: touch.clientY\n      };\n\n      this._onDragStart(tapEvt, 'touch');\n    }\n    else if (!this.nativeDraggable) {\n      this._onDragStart(tapEvt, true);\n    }\n    else {\n      _on(dragEl, 'dragend', this);\n      _on(rootEl, 'dragstart', this._onDragStart);\n    }\n\n    try {\n      if (document.selection) {\n        // Timeout neccessary for IE9\n        setTimeout(function () {\n          document.selection.empty();\n        });\n      } else {\n        window.getSelection().removeAllRanges();\n      }\n    } catch (err) {\n    }\n  },\n\n  _dragStarted: function () {\n    if (rootEl && dragEl) {\n      var options = this.options;\n\n      // Apply effect\n      _toggleClass(dragEl, options.ghostClass, true);\n      _toggleClass(dragEl, options.dragClass, false);\n\n      Sortable.active = this;\n\n      // Drag start event\n      _dispatchEvent(this, rootEl, 'start', dragEl, rootEl, oldIndex);\n    } else {\n      this._nulling();\n    }\n  },\n\n  _emulateDragOver: function () {\n    if (touchEvt) {\n      if (this._lastX === touchEvt.clientX && this._lastY === touchEvt.clientY) {\n        return;\n      }\n\n      this._lastX = touchEvt.clientX;\n      this._lastY = touchEvt.clientY;\n\n      if (!supportCssPointerEvents) {\n        _css(ghostEl, 'display', 'none');\n      }\n\n      var target = document.elementFromPoint(touchEvt.clientX, touchEvt.clientY),\n        parent = target,\n        i = touchDragOverListeners.length;\n\n      if (parent) {\n        do {\n          if (parent[expando]) {\n            while (i--) {\n              touchDragOverListeners[i]({\n                clientX: touchEvt.clientX,\n                clientY: touchEvt.clientY,\n                target: target,\n                rootEl: parent\n              });\n            }\n\n            break;\n          }\n\n          target = parent; // store last element\n        }\n        /* jshint boss:true */\n        while (parent = parent.parentNode);\n      }\n\n      if (!supportCssPointerEvents) {\n        _css(ghostEl, 'display', '');\n      }\n    }\n  },\n\n\n  _onTouchMove: function (/**TouchEvent*/evt) {\n    if (tapEvt) {\n      var options = this.options,\n        fallbackTolerance = options.fallbackTolerance,\n        fallbackOffset = options.fallbackOffset,\n        touch = evt.touches ? evt.touches[0] : evt,\n        dx = (touch.clientX - tapEvt.clientX) + fallbackOffset.x,\n        dy = (touch.clientY - tapEvt.clientY) + fallbackOffset.y,\n        translate3d = evt.touches ? 'translate3d(' + dx + 'px,' + dy + 'px,0)' : 'translate(' + dx + 'px,' + dy + 'px)';\n\n      // only set the status to dragging, when we are actually dragging\n      if (!Sortable.active) {\n        if (fallbackTolerance &&\n          min(abs(touch.clientX - this._lastX), abs(touch.clientY - this._lastY)) < fallbackTolerance\n        ) {\n          return;\n        }\n\n        this._dragStarted();\n      }\n\n      // as well as creating the ghost element on the document body\n      this._appendGhost();\n\n      moved = true;\n      touchEvt = touch;\n\n      _css(ghostEl, 'webkitTransform', translate3d);\n      _css(ghostEl, 'mozTransform', translate3d);\n      _css(ghostEl, 'msTransform', translate3d);\n      _css(ghostEl, 'transform', translate3d);\n\n      evt.preventDefault();\n    }\n  },\n\n  _appendGhost: function () {\n    if (!ghostEl) {\n      var rect = dragEl.getBoundingClientRect(),\n        css = _css(dragEl),\n        options = this.options,\n        ghostRect;\n\n      ghostEl = dragEl.cloneNode(true);\n\n      _toggleClass(ghostEl, options.ghostClass, false);\n      _toggleClass(ghostEl, options.fallbackClass, true);\n      _toggleClass(ghostEl, options.dragClass, true);\n\n      _css(ghostEl, 'top', rect.top - parseInt(css.marginTop, 10));\n      _css(ghostEl, 'left', rect.left - parseInt(css.marginLeft, 10));\n      _css(ghostEl, 'width', rect.width);\n      _css(ghostEl, 'height', rect.height);\n      _css(ghostEl, 'opacity', '0.8');\n      _css(ghostEl, 'position', 'fixed');\n      _css(ghostEl, 'zIndex', '100000');\n      _css(ghostEl, 'pointerEvents', 'none');\n\n      options.fallbackOnBody && document.body.appendChild(ghostEl) || rootEl.appendChild(ghostEl);\n\n      // Fixing dimensions.\n      ghostRect = ghostEl.getBoundingClientRect();\n      _css(ghostEl, 'width', rect.width * 2 - ghostRect.width);\n      _css(ghostEl, 'height', rect.height * 2 - ghostRect.height);\n    }\n  },\n\n  _onDragStart: function (/**Event*/evt, /**boolean*/useFallback) {\n    var dataTransfer = evt.dataTransfer,\n      options = this.options;\n\n    this._offUpEvents();\n\n    if (activeGroup.checkPull(this, this, dragEl, evt)) {\n      cloneEl = _clone(dragEl);\n\n      cloneEl.draggable = false;\n      cloneEl.style['will-change'] = '';\n\n      _css(cloneEl, 'display', 'none');\n      _toggleClass(cloneEl, this.options.chosenClass, false);\n\n      rootEl.insertBefore(cloneEl, dragEl);\n      _dispatchEvent(this, rootEl, 'clone', dragEl);\n    }\n\n    _toggleClass(dragEl, options.dragClass, true);\n\n    if (useFallback) {\n      if (useFallback === 'touch') {\n        // Bind touch events\n        _on(document, 'touchmove', this._onTouchMove);\n        _on(document, 'touchend', this._onDrop);\n        _on(document, 'touchcancel', this._onDrop);\n        _on(document, 'pointermove', this._onTouchMove);\n        _on(document, 'pointerup', this._onDrop);\n      } else {\n        // Old brwoser\n        _on(document, 'mousemove', this._onTouchMove);\n        _on(document, 'mouseup', this._onDrop);\n      }\n\n      this._loopId = setInterval(this._emulateDragOver, 50);\n    }\n    else {\n      if (dataTransfer) {\n        dataTransfer.effectAllowed = 'move';\n        options.setData && options.setData.call(this, dataTransfer, dragEl);\n      }\n\n      _on(document, 'drop', this);\n      setTimeout(this._dragStarted, 0);\n    }\n  },\n\n  _onDragOver: function (/**Event*/evt) {\n    var el = this.el,\n      target,\n      dragRect,\n      targetRect,\n      revert,\n      options = this.options,\n      group = options.group,\n      activeSortable = Sortable.active,\n      isOwner = (activeGroup === group),\n      isMovingBetweenSortable = false,\n      canSort = options.sort;\n\n    if (evt.preventDefault !== void 0) {\n      evt.preventDefault();\n      !options.dragoverBubble && evt.stopPropagation();\n    }\n\n    if (dragEl.animated) {\n      return;\n    }\n\n    moved = true;\n\n    if (activeSortable && !options.disabled &&\n      (isOwner\n        ? canSort || (revert = !rootEl.contains(dragEl)) // Reverting item into the original list\n        : (\n          putSortable === this ||\n          (\n            (activeSortable.lastPullMode = activeGroup.checkPull(this, activeSortable, dragEl, evt)) &&\n            group.checkPut(this, activeSortable, dragEl, evt)\n          )\n        )\n      ) &&\n      (evt.rootEl === void 0 || evt.rootEl === this.el) // touch fallback\n    ) {\n      // Smart auto-scrolling\n      _autoScroll(evt, options, this.el);\n\n      if (_silent) {\n        return;\n      }\n\n      target = _closest(evt.target, options.draggable, el);\n      dragRect = dragEl.getBoundingClientRect();\n\n      if (putSortable !== this) {\n        putSortable = this;\n        isMovingBetweenSortable = true;\n      }\n\n      if (revert) {\n        _cloneHide(activeSortable, true);\n        parentEl = rootEl; // actualization\n\n        if (cloneEl || nextEl) {\n          rootEl.insertBefore(dragEl, cloneEl || nextEl);\n        }\n        else if (!canSort) {\n          rootEl.appendChild(dragEl);\n        }\n\n        return;\n      }\n\n\n      if ((el.children.length === 0) || (el.children[0] === ghostEl) ||\n        (el === evt.target) && (_ghostIsLast(el, evt))\n      ) {\n        //assign target only if condition is true\n        if (el.children.length !== 0 && el.children[0] !== ghostEl && el === evt.target) {\n          target = el.lastElementChild;\n        }\n\n        if (target) {\n          if (target.animated) {\n            return;\n          }\n\n          targetRect = target.getBoundingClientRect();\n        }\n\n        _cloneHide(activeSortable, isOwner);\n\n        if (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt) !== false) {\n          if (!dragEl.contains(el)) {\n            el.appendChild(dragEl);\n            parentEl = el; // actualization\n          }\n\n          this._animate(dragRect, dragEl);\n          target && this._animate(targetRect, target);\n        }\n      }\n      else if (target && !target.animated && target !== dragEl && (target.parentNode[expando] !== void 0)) {\n        if (lastEl !== target) {\n          lastEl = target;\n          lastCSS = _css(target);\n          lastParentCSS = _css(target.parentNode);\n        }\n\n        targetRect = target.getBoundingClientRect();\n\n        var width = targetRect.right - targetRect.left,\n          height = targetRect.bottom - targetRect.top,\n          floating = R_FLOAT.test(lastCSS.cssFloat + lastCSS.display)\n            || (lastParentCSS.display == 'flex' && lastParentCSS['flex-direction'].indexOf('row') === 0),\n          isWide = (target.offsetWidth > dragEl.offsetWidth),\n          isLong = (target.offsetHeight > dragEl.offsetHeight),\n          halfway = (floating ? (evt.clientX - targetRect.left) / width : (evt.clientY - targetRect.top) / height) > 0.5,\n          nextSibling = target.nextElementSibling,\n          after = false\n        ;\n\n        if (floating) {\n          var elTop = dragEl.offsetTop,\n            tgTop = target.offsetTop;\n\n          if (elTop === tgTop) {\n            after = (target.previousElementSibling === dragEl) && !isWide || halfway && isWide;\n          }\n          else if (target.previousElementSibling === dragEl || dragEl.previousElementSibling === target) {\n            after = (evt.clientY - targetRect.top) / height > 0.5;\n          } else {\n            after = tgTop > elTop;\n          }\n          } else if (!isMovingBetweenSortable) {\n          after = (nextSibling !== dragEl) && !isLong || halfway && isLong;\n        }\n\n        var moveVector = _onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, after);\n\n        if (moveVector !== false) {\n          if (moveVector === 1 || moveVector === -1) {\n            after = (moveVector === 1);\n          }\n\n          _silent = true;\n          setTimeout(_unsilent, 30);\n\n          _cloneHide(activeSortable, isOwner);\n\n          if (!dragEl.contains(el)) {\n            if (after && !nextSibling) {\n              el.appendChild(dragEl);\n            } else {\n              target.parentNode.insertBefore(dragEl, after ? nextSibling : target);\n            }\n          }\n\n          parentEl = dragEl.parentNode; // actualization\n\n          this._animate(dragRect, dragEl);\n          this._animate(targetRect, target);\n        }\n      }\n    }\n  },\n\n  _animate: function (prevRect, target) {\n    var ms = this.options.animation;\n\n    if (ms) {\n      var currentRect = target.getBoundingClientRect();\n\n      if (prevRect.nodeType === 1) {\n        prevRect = prevRect.getBoundingClientRect();\n      }\n\n      _css(target, 'transition', 'none');\n      _css(target, 'transform', 'translate3d('\n        + (prevRect.left - currentRect.left) + 'px,'\n        + (prevRect.top - currentRect.top) + 'px,0)'\n      );\n\n      target.offsetWidth; // repaint\n\n      _css(target, 'transition', 'all ' + ms + 'ms');\n      _css(target, 'transform', 'translate3d(0,0,0)');\n\n      clearTimeout(target.animated);\n      target.animated = setTimeout(function () {\n        _css(target, 'transition', '');\n        _css(target, 'transform', '');\n        target.animated = false;\n      }, ms);\n    }\n  },\n\n  _offUpEvents: function () {\n    var ownerDocument = this.el.ownerDocument;\n\n    _off(document, 'touchmove', this._onTouchMove);\n    _off(document, 'pointermove', this._onTouchMove);\n    _off(ownerDocument, 'mouseup', this._onDrop);\n    _off(ownerDocument, 'touchend', this._onDrop);\n    _off(ownerDocument, 'pointerup', this._onDrop);\n    _off(ownerDocument, 'touchcancel', this._onDrop);\n    _off(ownerDocument, 'pointercancel', this._onDrop);\n    _off(ownerDocument, 'selectstart', this);\n  },\n\n  _onDrop: function (/**Event*/evt) {\n    var el = this.el,\n      options = this.options;\n\n    clearInterval(this._loopId);\n    clearInterval(autoScroll.pid);\n    clearTimeout(this._dragStartTimer);\n\n    // Unbind events\n    _off(document, 'mousemove', this._onTouchMove);\n\n    if (this.nativeDraggable) {\n      _off(document, 'drop', this);\n      _off(el, 'dragstart', this._onDragStart);\n    }\n\n    this._offUpEvents();\n\n    if (evt) {\n      if (moved) {\n        evt.preventDefault();\n        !options.dropBubble && evt.stopPropagation();\n      }\n\n      ghostEl && ghostEl.parentNode && ghostEl.parentNode.removeChild(ghostEl);\n\n      if (rootEl === parentEl || Sortable.active.lastPullMode !== 'clone') {\n        // Remove clone\n        cloneEl && cloneEl.parentNode && cloneEl.parentNode.removeChild(cloneEl);\n      }\n\n      if (dragEl) {\n        if (this.nativeDraggable) {\n          _off(dragEl, 'dragend', this);\n        }\n\n        _disableDraggable(dragEl);\n        dragEl.style['will-change'] = '';\n\n        // Remove class's\n        _toggleClass(dragEl, this.options.ghostClass, false);\n        _toggleClass(dragEl, this.options.chosenClass, false);\n\n        // Drag stop event\n        _dispatchEvent(this, rootEl, 'unchoose', dragEl, rootEl, oldIndex);\n\n        if (rootEl !== parentEl) {\n          newIndex = _index(dragEl, options.draggable);\n\n          if (newIndex >= 0) {\n            // Add event\n            _dispatchEvent(null, parentEl, 'add', dragEl, rootEl, oldIndex, newIndex);\n\n            // Remove event\n            _dispatchEvent(this, rootEl, 'remove', dragEl, rootEl, oldIndex, newIndex);\n\n            // drag from one list and drop into another\n            _dispatchEvent(null, parentEl, 'sort', dragEl, rootEl, oldIndex, newIndex);\n            _dispatchEvent(this, rootEl, 'sort', dragEl, rootEl, oldIndex, newIndex);\n          }\n        }\n        else {\n          if (dragEl.nextSibling !== nextEl) {\n            // Get the index of the dragged element within its parent\n            newIndex = _index(dragEl, options.draggable);\n\n            if (newIndex >= 0) {\n              // drag & drop within the same list\n              _dispatchEvent(this, rootEl, 'update', dragEl, rootEl, oldIndex, newIndex);\n              _dispatchEvent(this, rootEl, 'sort', dragEl, rootEl, oldIndex, newIndex);\n            }\n          }\n        }\n\n        if (Sortable.active) {\n          /* jshint eqnull:true */\n          if (newIndex == null || newIndex === -1) {\n            newIndex = oldIndex;\n          }\n\n          _dispatchEvent(this, rootEl, 'end', dragEl, rootEl, oldIndex, newIndex);\n\n          // Save sorting\n          this.save();\n        }\n      }\n\n    }\n\n    this._nulling();\n  },\n\n  _nulling: function() {\n    rootEl =\n    dragEl =\n    parentEl =\n    ghostEl =\n    nextEl =\n    cloneEl =\n    lastDownEl =\n\n    scrollEl =\n    scrollParentEl =\n\n    tapEvt =\n    touchEvt =\n\n    moved =\n    newIndex =\n\n    lastEl =\n    lastCSS =\n\n    putSortable =\n    activeGroup =\n    Sortable.active = null;\n\n    savedInputChecked.forEach(function (el) {\n      el.checked = true;\n    });\n    savedInputChecked.length = 0;\n  },\n\n  handleEvent: function (/**Event*/evt) {\n    switch (evt.type) {\n      case 'drop':\n      case 'dragend':\n        this._onDrop(evt);\n        break;\n\n      case 'dragover':\n      case 'dragenter':\n        if (dragEl) {\n          this._onDragOver(evt);\n          _globalDragOver(evt);\n        }\n        break;\n\n      case 'selectstart':\n        evt.preventDefault();\n        break;\n    }\n  },\n\n\n  /**\n   * Serializes the item into an array of string.\n   * @returns {String[]}\n   */\n  toArray: function () {\n    var order = [],\n      el,\n      children = this.el.children,\n      i = 0,\n      n = children.length,\n      options = this.options;\n\n    for (; i < n; i++) {\n      el = children[i];\n      if (_closest(el, options.draggable, this.el)) {\n        order.push(el.getAttribute(options.dataIdAttr) || _generateId(el));\n      }\n    }\n\n    return order;\n  },\n\n\n  /**\n   * Sorts the elements according to the array.\n   * @param  {String[]}  order  order of the items\n   */\n  sort: function (order) {\n    var items = {}, rootEl = this.el;\n\n    this.toArray().forEach(function (id, i) {\n      var el = rootEl.children[i];\n\n      if (_closest(el, this.options.draggable, rootEl)) {\n        items[id] = el;\n      }\n    }, this);\n\n    order.forEach(function (id) {\n      if (items[id]) {\n        rootEl.removeChild(items[id]);\n        rootEl.appendChild(items[id]);\n      }\n    });\n  },\n\n\n  /**\n   * Save the current sorting\n   */\n  save: function () {\n    var store = this.options.store;\n    store && store.set(this);\n  },\n\n\n  /**\n   * For each element in the set, get the first element that matches the selector by testing the element itself and traversing up through its ancestors in the DOM tree.\n   * @param   {HTMLElement}  el\n   * @param   {String}       [selector]  default: `options.draggable`\n   * @returns {HTMLElement|null}\n   */\n  closest: function (el, selector) {\n    return _closest(el, selector || this.options.draggable, this.el);\n  },\n\n\n  /**\n   * Set/get option\n   * @param   {string} name\n   * @param   {*}      [value]\n   * @returns {*}\n   */\n  option: function (name, value) {\n    var options = this.options;\n\n    if (value === void 0) {\n      return options[name];\n    } else {\n      options[name] = value;\n\n      if (name === 'group') {\n        _prepareGroup(options);\n      }\n    }\n  },\n\n\n  /**\n   * Destroy\n   */\n  destroy: function () {\n    var el = this.el;\n\n    el[expando] = null;\n\n    _off(el, 'mousedown', this._onTapStart);\n    _off(el, 'touchstart', this._onTapStart);\n    _off(el, 'pointerdown', this._onTapStart);\n\n    if (this.nativeDraggable) {\n      _off(el, 'dragover', this);\n      _off(el, 'dragenter', this);\n    }\n\n    // Remove draggable attributes\n    Array.prototype.forEach.call(el.querySelectorAll('[draggable]'), function (el) {\n      el.removeAttribute('draggable');\n    });\n\n    touchDragOverListeners.splice(touchDragOverListeners.indexOf(this._onDragOver), 1);\n\n    this._onDrop();\n\n    this.el = el = null;\n  }\n};\n\n\nfunction _cloneHide(sortable, state) {\n  if (sortable.lastPullMode !== 'clone') {\n    state = true;\n  }\n\n  if (cloneEl && (cloneEl.state !== state)) {\n    _css(cloneEl, 'display', state ? 'none' : '');\n\n    if (!state) {\n      if (cloneEl.state) {\n        if (sortable.options.group.revertClone) {\n          rootEl.insertBefore(cloneEl, nextEl);\n          sortable._animate(dragEl, cloneEl);\n        } else {\n          rootEl.insertBefore(cloneEl, dragEl);\n        }\n      }\n    }\n\n    cloneEl.state = state;\n  }\n}\n\n\nfunction _closest(/**HTMLElement*/el, /**String*/selector, /**HTMLElement*/ctx) {\n  if (el) {\n    ctx = ctx || document;\n\n    do {\n      if ((selector === '>*' && el.parentNode === ctx) || _matches(el, selector)) {\n        return el;\n      }\n      /* jshint boss:true */\n    } while (el = _getParentOrHost(el));\n  }\n\n  return null;\n}\n\n\nfunction _getParentOrHost(el) {\n  var parent = el.host;\n\n  return (parent && parent.nodeType) ? parent : el.parentNode;\n}\n\n\nfunction _globalDragOver(/**Event*/evt) {\n  if (evt.dataTransfer) {\n    evt.dataTransfer.dropEffect = 'move';\n  }\n  evt.preventDefault();\n}\n\n\nfunction _on(el, event, fn) {\n  el.addEventListener(event, fn, captureMode);\n}\n\n\nfunction _off(el, event, fn) {\n  el.removeEventListener(event, fn, captureMode);\n}\n\n\nfunction _toggleClass(el, name, state) {\n  if (el) {\n    if (el.classList) {\n      el.classList[state ? 'add' : 'remove'](name);\n    }\n    else {\n      var className = (' ' + el.className + ' ').replace(R_SPACE, ' ').replace(' ' + name + ' ', ' ');\n      el.className = (className + (state ? ' ' + name : '')).replace(R_SPACE, ' ');\n    }\n  }\n}\n\n\nfunction _css(el, prop, val) {\n  var style = el && el.style;\n\n  if (style) {\n    if (val === void 0) {\n      if (document.defaultView && document.defaultView.getComputedStyle) {\n        val = document.defaultView.getComputedStyle(el, '');\n      }\n      else if (el.currentStyle) {\n        val = el.currentStyle;\n      }\n\n      return prop === void 0 ? val : val[prop];\n    }\n    else {\n      if (!(prop in style)) {\n        prop = '-webkit-' + prop;\n      }\n\n      style[prop] = val + (typeof val === 'string' ? '' : 'px');\n    }\n  }\n}\n\n\nfunction _find(ctx, tagName, iterator) {\n  if (ctx) {\n    var list = ctx.getElementsByTagName(tagName), i = 0, n = list.length;\n\n    if (iterator) {\n      for (; i < n; i++) {\n        iterator(list[i], i);\n      }\n    }\n\n    return list;\n  }\n\n  return [];\n}\n\n\n\nfunction _dispatchEvent(sortable, rootEl, name, targetEl, fromEl, startIndex, newIndex) {\n  sortable = (sortable || rootEl[expando]);\n\n  var evt = document.createEvent('Event'),\n    options = sortable.options,\n    onName = 'on' + name.charAt(0).toUpperCase() + name.substr(1);\n\n  evt.initEvent(name, true, true);\n\n  evt.to = rootEl;\n  evt.from = fromEl || rootEl;\n  evt.item = targetEl || rootEl;\n  evt.clone = cloneEl;\n\n  evt.oldIndex = startIndex;\n  evt.newIndex = newIndex;\n\n  rootEl.dispatchEvent(evt);\n\n  if (options[onName]) {\n    options[onName].call(sortable, evt);\n  }\n}\n\n\nfunction _onMove(fromEl, toEl, dragEl, dragRect, targetEl, targetRect, originalEvt, willInsertAfter) {\n  var evt,\n    sortable = fromEl[expando],\n    onMoveFn = sortable.options.onMove,\n    retVal;\n\n  evt = document.createEvent('Event');\n  evt.initEvent('move', true, true);\n\n  evt.to = toEl;\n  evt.from = fromEl;\n  evt.dragged = dragEl;\n  evt.draggedRect = dragRect;\n  evt.related = targetEl || toEl;\n  evt.relatedRect = targetRect || toEl.getBoundingClientRect();\n  evt.willInsertAfter = willInsertAfter;\n\n  fromEl.dispatchEvent(evt);\n\n  if (onMoveFn) {\n    retVal = onMoveFn.call(sortable, evt, originalEvt);\n  }\n\n  return retVal;\n}\n\n\nfunction _disableDraggable(el) {\n  el.draggable = false;\n}\n\n\nfunction _unsilent() {\n  _silent = false;\n}\n\n\n/** @returns {HTMLElement|false} */\nfunction _ghostIsLast(el, evt) {\n  var lastEl = el.lastElementChild,\n    rect = lastEl.getBoundingClientRect();\n\n  // 5 — min delta\n  // abs — нельзя добавлять, а то глюки при наведении сверху\n  return (evt.clientY - (rect.top + rect.height) > 5) ||\n    (evt.clientX - (rect.left + rect.width) > 5);\n}\n\n\n/**\n * Generate id\n * @param   {HTMLElement} el\n * @returns {String}\n * @private\n */\nfunction _generateId(el) {\n  var str = el.tagName + el.className + el.src + el.href + el.textContent,\n    i = str.length,\n    sum = 0;\n\n  while (i--) {\n    sum += str.charCodeAt(i);\n  }\n\n  return sum.toString(36);\n}\n\n/**\n * Returns the index of an element within its parent for a selected set of\n * elements\n * @param  {HTMLElement} el\n * @param  {selector} selector\n * @return {number}\n */\nfunction _index(el, selector) {\n  var index = 0;\n\n  if (!el || !el.parentNode) {\n    return -1;\n  }\n\n  while (el && (el = el.previousElementSibling)) {\n    if ((el.nodeName.toUpperCase() !== 'TEMPLATE') && (selector === '>*' || _matches(el, selector))) {\n      index++;\n    }\n  }\n\n  return index;\n}\n\nfunction _matches(/**HTMLElement*/el, /**String*/selector) {\n  if (el) {\n    selector = selector.split('.');\n\n    var tag = selector.shift().toUpperCase(),\n      re = new RegExp('\\\\s(' + selector.join('|') + ')(?=\\\\s)', 'g');\n\n    return (\n      (tag === '' || el.nodeName.toUpperCase() == tag) &&\n      (!selector.length || ((' ' + el.className + ' ').match(re) || []).length == selector.length)\n    );\n  }\n\n  return false;\n}\n\nfunction _throttle(callback, ms) {\n  var args, _this;\n\n  return function () {\n    if (args === void 0) {\n      args = arguments;\n      _this = this;\n\n      setTimeout(function () {\n        if (args.length === 1) {\n          callback.call(_this, args[0]);\n        } else {\n          callback.apply(_this, args);\n        }\n\n        args = void 0;\n      }, ms);\n    }\n  };\n}\n\nfunction _extend(dst, src) {\n  if (dst && src) {\n    for (var key in src) {\n      if (src.hasOwnProperty(key)) {\n        dst[key] = src[key];\n      }\n    }\n  }\n\n  return dst;\n}\n\nfunction _clone(el) {\n  return $\n    ? $(el).clone(true)[0]\n    : (Polymer && Polymer.dom\n      ? Polymer.dom(el).cloneNode(true)\n      : el.cloneNode(true)\n    );\n}\n\nfunction _saveInputCheckedState(root) {\n  var inputs = root.getElementsByTagName('input');\n  var idx = inputs.length;\n\n  while (idx--) {\n    var el = inputs[idx];\n    el.checked && savedInputChecked.push(el);\n  }\n}\n\n// Fixed #973: \n_on(document, 'touchmove', function (evt) {\n  if (Sortable.active) {\n    evt.preventDefault();\n  }\n});\n\ntry {\n  window.addEventListener('test', null, Object.defineProperty({}, 'passive', {\n    get: function () {\n      captureMode = {\n        capture: false,\n        passive: false\n      };\n    }\n  }));\n} catch (err) {}\n\n// Export utils\nSortable.utils = {\n  on: _on,\n  off: _off,\n  css: _css,\n  find: _find,\n  is: function (el, selector) {\n    return !!_closest(el, selector, el);\n  },\n  extend: _extend,\n  throttle: _throttle,\n  closest: _closest,\n  toggleClass: _toggleClass,\n  clone: _clone,\n  index: _index\n};\n\n\n/**\n * Create sortable instance\n * @param {HTMLElement}  el\n * @param {Object}      [options]\n */\nSortable.create = function (el, options) {\n  return new Sortable(el, options);\n};\n\n\n// Export\nSortable.version = '1.6.0';\n\nexport default Sortable;\n","import { ImagePart as Head, ImagePart as Face, ImagePart as Body, ImagePart as Accessory, TextPart as Line } from './model.js';\n\n\nconst data = new Vuex.Store({\n  state: {\n    heads: [new Head({selection: 0, params:{width: 130, height: 115, x: 0, y: 0, rotation: 0, mirror: false}})],\n    faces: [new Face({selection: 0, params:{width: 60, height: 70, x: 0, y: 0, rotation: 0, mirror: false}})],\n    bodies: [],\n    accessories: [],\n    lines: [new Line({context: '吔屎啦你', params:{size: 18, x: 0, y: 75, rotation: 0, mirror: false}})],\n    output: {\n      padding: 10,\n      region: {left:0, right:0, top:0, bottom:0},\n      scale: 1,\n      quality: 50,\n      iteration: 6\n    }\n  },\n  mutations: {\n    addHead(state){\n      state.heads = [ ...state.heads, new Head() ]\n    },\n    addFace(state){\n      state.faces = [ ...state.faces, new Face() ]\n    },\n    addBody(state){\n      state.bodies = [ ...state.bodies, new Body() ]\n    },\n    addAccessory(state){\n      state.accessories = [ ...state.accessories, new Accessory() ]\n    },\n    addLine(state){\n      state.lines = [ ...state.lines, new Line() ]\n    },\n    select(state, {category, index, value}){\n      Vue.set(state[category][index], 'selection', value);\n    },\n    contextChange(state, {index, value}){\n      Vue.set(state['lines'][index], 'context', value);\n    },\n    setParam(state, {category, index, param, value}){\n      Vue.set(state[category][index].params, param, value);\n    },\n    updatePadding(state, padding){\n      state.output.padding = padding;\n    },\n    updateRegion(state, region){\n      state.output.region = region;\n    },\n    updateScale(state, scale){\n      state.output.scale = scale;\n    },\n    updateQuality(state, quality){\n      state.output.quality = quality;\n    },\n    updateIteration(state, iteration){\n      state.output.iteration = iteration;\n    },\n  }\n})\n\nexport default data;","let browser = {};\n\n// Opera 8.0+\nbrowser.isOpera = (!!window.opr && !!opr.addons) || !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0;\n\n// Firefox 1.0+\nbrowser.isFirefox = typeof InstallTrigger !== 'undefined';\n\n// Safari 3.0+ \"[object HTMLElementConstructor]\" \nbrowser.isSafari = /constructor/i.test(window.HTMLElement) || (function (p) { return p.toString() === \"[object SafariRemoteNotification]\"; })(!window['safari'] || (typeof safari !== 'undefined' && safari.pushNotification));\n\n// Internet Explorer 6-11\nbrowser.isIE = /*@cc_on!@*/false || !!document.documentMode;\n\n// Edge 20+\nbrowser.isEdge = !browser.isIE && !!window.StyleMedia;\n\n// Chrome 1+\nbrowser.isChrome = !!window.chrome && !!window.chrome.webstore;\n\n// Blink engine detection\nbrowser.isBlink = (browser.isChrome || browser.isOpera) && !!window.CSS;\n\nexport default browser;","import '../styles/main.css';\n\nimport { canvasWidth, canvasHeight } from './constants.js'\n\nimport { ImagePart as Head, ImagePart as Face, ImagePart as Body, ImagePart as Accessory, TextPart as Line } from './model.js';\nimport { newDraw, newBorder } from './draw.js';\nimport { el_heads, el_faces, el_bodies, el_accessories } from './data.js';\nimport './components.js';\n\nimport { swipeMixin } from './mixins.js';\n\nimport * as C from './constants.js'\n\nimport Sortable from './sortable.esm.js'\n\nimport store from './store.js'\n\nimport browser from './browser.js'\n\n// if(browser.isFirefox||browser.isChrome||browser.isSafari){\n  document.querySelector('#imcompitableCover').style.display = 'none'\n// }\n// else{\n//   alert(browser.isFirefox);\n//   alert(browser.isChrome);\n//   alert(browser.isSafari);\n// }\n\nconst app = new Vue({\n  el: '#app',\n  mixins: [swipeMixin],\n  store,\n  data: {\n    canvasWidth: canvasWidth,\n    canvasHeight: canvasHeight,\n    elements: {\n      heads: [],\n      faces: [],\n      bodies: [],\n      accessories: []\n    },\n    order: [{type: 'heads', index: 0}, {type: 'faces', index: 0}, {type: 'lines', index: 0}],\n    activePart: null,\n    controller: {\n      displayBorder: false,\n      showOutput: false\n    }\n  },\n  methods: {\n    updateCanvas: function(name, data){\n      this.redraw();\n    },\n    updateTarget: function(name){\n      this.activePart = name;\n      this.redraw();\n    },\n    addBody: function(){\n      if(this.$store.state.bodies.length<=3){\n        this.$store.commit('addBody');\n        this.order.push({type: 'bodies', index: this.$store.state.bodies.length-1});\n      }\n      else{\n        return;\n      }\n    },\n    addAccessory: function(){\n      if(this.$store.state.accessories.length<=3){\n        this.$store.commit('addAccessory');\n        this.order.push({type: 'accessories', index: this.$store.state.accessories.length-1});\n      }\n      else{\n        return;\n      }\n    },\n    addLine: function(){\n      if(this.$store.state.lines.length<=3){\n        this.$store.commit('addLine');\n        this.order.push({type: 'lines', index: this.$store.state.lines.length-1});\n      }\n      else{\n        return;\n      }\n    },\n    output: function(){\n      this.controller.showOutput = true;\n    },\n    redraw: function(){\n      var drawList = this.order.map((v)=>{\n        return {type: v.type, index: v.index, data: this.$store.state[v.type][v.index]}\n      })\n      newDraw(drawList);\n      this.$store.commit('updateRegion', newBorder(drawList, +this.$store.state.padding, this.controller.displayBorder));\n    }\n  },\n  created: function(){\n    for(var i=0;i<el_heads.length;i++){\n      this.elements.heads.push(el_heads[i])\n    }\n    for(var i=0;i<el_faces.length;i++){\n      this.elements.faces.push(el_faces[i])\n    }\n    for(var i=0;i<el_bodies.length;i++){\n      this.elements.bodies.push(el_bodies[i])\n    }\n    for(var i=0;i<el_accessories.length;i++){\n      this.elements.accessories.push(el_accessories[i])\n    }\n  },\n  mounted: function(){\n    Promise.all([new Promise(resolve => {\n      this.$refs['heads'][0].$el.querySelector('.element').onload = () => {\n        resolve();\n      }\n    }), new Promise(resolve => {\n      this.$refs['faces'][0].$el.querySelector('.element').onload = () => {\n        resolve();\n      }\n    })]).then(() => {\n      this.redraw();\n    })\n    Sortable.create(renderList, {\n      group: 'renderList',\n      animation: 100,\n      onChoose: (evt) => {\n        this.activePart = (evt.item.innerHTML);\n      },\n      onRemove: (evt) => {\n        this.order.splice(evt.oldIndex, 1);\n        this.redraw();\n      },\n      onUpdate: (evt) => {\n        this.order.splice(evt.newIndex, 0, this.order.splice(evt.oldIndex, 1)[0])\n        this.redraw();\n      }\n    });\n    Sortable.create(trashBin, {\n      group: {name: 'trashBin', put: 'renderList'},\n      animation: 100,\n      onAdd: (evt) => {\n        console.log(evt)\n        evt.item.remove();\n        console.log(evt.item.innerText.slice(0,-1))\n        console.log(evt.item.innerText.slice(-1))\n        this[evt.item.innerText.slice(0,-1)].slice(evt.item.innerText.slice(-1), 1);\n      }\n    });\n  }\n});\n"],"names":["canvasWidth","canvasHeight","ImagePart","data","undefined","selection","params","width","height","x","y","rotation","mirror","s","w","h","r","m","k","TextPart","context","size","c","mir","drawImage","ctx","img","save","scale","translate","canvas","rotate","Math","PI","restore","fillText","text","fillStyle","font","textBaseline","textAlign","drawBorder","t","b","l","strokeRect","newDraw","drawList","document","querySelector","getContext","fillRect","i","length","type","index","querySelectorAll","borderValueCheck","rect","item","lineWidth","top","right","bottom","left","newBorder","padding","isDrawBorder","measureText","el_heads","el_faces","el_bodies","el_accessories","render","$emit","disabled","collapse","clip","value","min","max","findClosest","arr","v","diff","Number","MAX_SAFE_INTEGER","abs","swipeParams","_xDown","_yDown","_xPrev","_yPrev","_xUp","_yUp","_xMove","_yMove","_xDiff","_yDiff","_touchTime","_xVelocity","_yVelocity","_moveTime","_moved","evt","preventDefault","stopPropagation","clientX","touches","clientY","Date","now","touchCallback","ctrlKey","altKey","shiftKey","metaKey","_moveThreshold","swipeCallback","moveCallback","endCallback","_tapTime","_tapThreshold","tapCallback","_swipeClear","$on","log","swipe_vue","smoothing","rbc","$el","getBoundingClientRect","cbc","children","vertical","offsetY","offsetX","dx","dy","vx","vy","slots","e","target","dataset","elements","s_v","n","o","isNaN","$store","commit","name","slice","key","mods","onPartSelected","focus","s_i","state","t_i","Promise","resolve","Image","onload","imageData","getImageData","p","g","clamp","u","clampuv","r1","g1","b1","putImageData","src","toDataURL","output","quality","currentIteration","iteration","inv","iter","rendered","finished","region","reset","Vue","component","f","e_l","i_p","t_p","o_p","_init","addEventListener","handleTouchStart","passive","handleTouchMove","handleTouchEnd","handleWheel","moveThreshold","tapThreshold","tapTime","xDown","yDown","xPrev","yPrev","xUp","yUp","xMove","yMove","xDiff","yDiff","touchTime","xVelocity","yVelocity","moveTime","clear","swipe","swipeMixin","op","window","innerWidth","activePart","$refs","ondrag","startsWith","init","touchHandler","moveHandler","endHandler","swipeHandler","tapHandler","Error","dragEl","parentEl","ghostEl","cloneEl","rootEl","nextEl","lastDownEl","scrollEl","scrollParentEl","scrollCustomFn","lastEl","lastCSS","lastParentCSS","oldIndex","newIndex","activeGroup","putSortable","autoScroll","tapEvt","touchEvt","moved","R_SPACE","R_FLOAT","expando","getTime","win","parseInt","$","jQuery","Zepto","Polymer","captureMode","supportDraggable","createElement","supportCssPointerEvents","el","navigator","userAgent","match","style","cssText","pointerEvents","_silent","savedInputChecked","touchDragOverListeners","_autoScroll","_throttle","options","scroll","_this","sens","scrollSensitivity","speed","scrollSpeed","winWidth","winHeight","innerHeight","scrollOffsetX","scrollOffsetY","scrollFn","offsetWidth","scrollWidth","offsetHeight","scrollHeight","parentNode","pid","setInterval","call","scrollTo","pageXOffset","pageYOffset","scrollTop","scrollLeft","_prepareGroup","toFn","pull","group","to","from","fromGroup","join","indexOf","originalGroup","checkPull","checkPut","put","revertClone","Sortable","nodeType","toString","_extend","defaults","random","test","nodeName","dataTransfer","setData","textContent","fn","charAt","bind","nativeDraggable","forceFallback","_onTapStart","push","_onDragOver","store","sort","get","prototype","preventOnFilter","touch","originalTarget","shadowRoot","path","filter","startIndex","button","_closest","draggable","_index","split","some","criteria","trim","handle","_prepareDragStart","ownerDocument","dragStartFn","nextSibling","_lastX","_lastY","_disableDelayedDrag","chosenClass","_triggerDragStart","ignore","forEach","_disableDraggable","_onDrop","delay","_dragStartTimer","setTimeout","pointerType","_onDragStart","empty","getSelection","removeAllRanges","err","ghostClass","dragClass","active","_nulling","elementFromPoint","parent","fallbackTolerance","fallbackOffset","translate3d","_dragStarted","_appendGhost","css","_css","ghostRect","cloneNode","fallbackClass","marginTop","marginLeft","fallbackOnBody","body","appendChild","useFallback","_offUpEvents","_clone","insertBefore","_onTouchMove","_loopId","_emulateDragOver","effectAllowed","dragRect","targetRect","revert","activeSortable","isOwner","isMovingBetweenSortable","canSort","dragoverBubble","animated","contains","lastPullMode","_ghostIsLast","lastElementChild","_onMove","_animate","floating","cssFloat","display","isWide","isLong","halfway","nextElementSibling","after","elTop","offsetTop","tgTop","previousElementSibling","moveVector","_unsilent","prevRect","ms","animation","currentRect","dropBubble","removeChild","checked","order","getAttribute","dataIdAttr","_generateId","items","toArray","id","set","selector","removeAttribute","splice","_cloneHide","sortable","_matches","_getParentOrHost","host","_globalDragOver","dropEffect","_on","event","_off","removeEventListener","_toggleClass","classList","className","replace","prop","val","defaultView","getComputedStyle","currentStyle","_find","tagName","iterator","list","getElementsByTagName","_dispatchEvent","targetEl","fromEl","createEvent","onName","toUpperCase","substr","initEvent","clone","dispatchEvent","toEl","originalEvt","willInsertAfter","onMoveFn","onMove","retVal","dragged","draggedRect","related","relatedRect","str","href","sum","charCodeAt","tag","shift","re","RegExp","callback","args","arguments","apply","dst","hasOwnProperty","dom","_saveInputCheckedState","root","inputs","idx","Object","defineProperty","utils","create","version","Vuex","Store","Head","Face","Line","heads","faces","bodies","Body","accessories","Accessory","lines","category","param","browser","isOpera","opr","addons","opera","isFirefox","InstallTrigger","isSafari","HTMLElement","safari","pushNotification","isIE","documentMode","isEdge","StyleMedia","isChrome","chrome","webstore","isBlink","CSS","app","redraw","controller","showOutput","map","displayBorder","all","then","renderList","innerHTML","trashBin","remove","innerText"],"mappings":"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"}